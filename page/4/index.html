<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="计算机 比特币 互联网金融 IFWallet" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="区块链爱好者，互联网从业者">
<meta name="keywords" content="bibodeng, blockchain, bitcoin, bitcoin cash, life, programmer">
<meta property="og:type" content="website">
<meta property="og:title" content="bibodeng">
<meta property="og:url" content="https://bibodeng.github.io/page/4/index.html">
<meta property="og:site_name" content="bibodeng">
<meta property="og:description" content="区块链爱好者，互联网从业者">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="bibodeng">
<meta name="twitter:description" content="区块链爱好者，互联网从业者">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"right","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> bibodeng </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-right 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">bibodeng</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Think By My Mind</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/01/TEG编码大赛，Show me the code/" itemprop="url">
                  TEG编码大赛，Show me the code
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-11-01T18:03:45+08:00" content="2015-11-01">
              2015-11-01
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2015/11/01/TEG编码大赛，Show me the code/" class="leancloud_visitors" data-flag-title="TEG编码大赛，Show me the code">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#TEG Code大赛</p>
<p>九月份的时候参加了TEG Code编程大赛，在腾讯，TEG素来以专研技术在各BG中而名，故而有时候会比较强调码农做的事情，有时候也搞一些比较有意思的比赛，具有浓烈的geek风范。技术从来都是疯狂的程序员所热衷所在，否则就不会走上计算机编程这条不归之路。我们两个鲜肉，联合了两个T3-2的大腿也参加了比赛，干脆就取名叫“大腿鲜肉队”。</p>
<p><img src="http://www.bibodeng.com/content/plugins/kl_album/upload/201511/350685835b307ccc05375c75a0ae3ecf201511011801141163677904.jpg" alt="TEG Code"></p>
<p>初赛的题目是要从一个远程的服务器拉取文件到本地，文件包含家政服务的信息，需要解析并清洗出订单和服务员两种实体，分别存储到数据库的两个表中（也可以不存储），最后按照规则计算如何分配订单和服务员，才能够让收益最大化。下面是具体的题目，由于我们只做了文件传输和解析部分，故而就远程拉取文件和解析给出我们的答案，有机会再将匹配算法给出。</p>
<p>##文件服务端<br>第一步，首先要将服务器端的文件读取到内存中，然后通过网络连接将资料通过TCP协议传送到客户端。根据这个思想，我们用C语言实现了一个单线程的版本，如果要尽量快地发送数据，那就要开多个线程将文件包发送出去。首先计算出文件的大小，然后划分成若干个块，分次读取到内存buffer中，而最后一块比较特殊，因为未必能够填满完整的size内存。读取完后，循环监听TCP请求</p>
<pre><code>//
//  main.c
//  TEG code
//
//  Created by feihongliu on 15/8/22.
//  Copyright (c) 2015年 feihongliu. All rights reserved.
//

////////////////////////////////////
//服务器代码
///////////////////////////////////
//本文件是服务器的代码

#include &lt;netinet in.h=&quot;&quot;&gt;    // for sockaddr_in
#include &lt;sys types.h=&quot;&quot;&gt;     // for socket
#include &lt;sys socket.h=&quot;&quot;&gt;    // for socket
#include &lt;stdio.h&gt;         // for printf
#include &lt;stdlib.h&gt;        // for exit
#include &lt;string.h&gt;        // for bzero
#include &lt;time.h&gt;          //for time_t and time

#define SERVER_PORT 7754
#define LENGTH_OF_LISTEN_QUEUE 20
#define BUFFER_SIZE 1024

#define _FILE_OFFSET_BITS 64
#define MemoryChunk 16777216
#define FILE_PATH &quot;data/1.dat&quot;

int main(int argc, char **argv)
{
    //设置一个socket地址结构server_addr, 代表服务器internet地址, 端口
    struct sockaddr_in server_addr;
    bzero(&amp;amp;server_addr, sizeof(server_addr)); //把一段内存区的内容全部设置为0
    server_addr.sin_family = AF_INET;
    server_addr.sin_addr.s_addr = htons(INADDR_ANY);
    server_addr.sin_port = htons(SERVER_PORT);

    //创建用于internet的流协议(TCP)socket, 用server_socket代表服务器socket
    int server_socket = socket(AF_INET, SOCK_STREAM, 0);
    if (server_socket &amp;lt; 0)
    {
        printf(&quot;Create Socket Failed!&quot;);
        exit(1);
    }

    //把socket和socket地址结构联系起来
    if (bind(server_socket, (struct sockaddr*)&amp;amp;server_addr, sizeof(server_addr)))
    {
        printf(&quot;Server Bind Port : %d Failed!&quot;, SERVER_PORT);
        exit(1);
    }

    //server_socket用于监听
    if (listen(server_socket, LENGTH_OF_LISTEN_QUEUE))
    {
        printf(&quot;Server Listen Failed!&quot;);
        exit(1);
    }

    printf(&quot;Start file read&quot;);
    FILE * pFile;
    long lSize;

    pFile = fopen(FILE_PATH, &quot;rb&quot;);
    fseek(pFile, 0, SEEK_END);
    lSize = ftell(pFile);
    rewind(pFile);

    int mount = lSize / MemoryChunk + 1;
    char ** memaddr_array = (char**)malloc(sizeof(char*)*mount);
    for (int i = 0; i &amp;lt; mount; i++)
    {
        char * buffer;
        buffer = (char*)malloc(sizeof(char)*MemoryChunk);
        memaddr_array[i] = buffer;
    }

    //load file to memery
    for (int i = 0; i &amp;lt; mount - 1; i++)
    {
        fread(memaddr_array[i], MemoryChunk, 1, pFile);
    }
    int last_size = lSize - ftell(pFile);
    fread(memaddr_array[mount - 1], 1, last_size, pFile);

    printf(&quot;End file read&quot;);


    //服务器端要一直运行
    while (1)
    {
        struct sockaddr_in client_addr;
        socklen_t length = sizeof(client_addr);
        int new_server_socket = accept(server_socket, (struct sockaddr*)&amp;amp;client_addr, &amp;amp;length);
        if (new_server_socket &amp;lt; 0)
        {
            printf(&quot;Server Accept Failed!\n&quot;);
            break;
        }
        //首次发送文件大小
        char filelength[64];
        sprintf(filelength, &quot;%ld&quot;, lSize);
        send(new_server_socket, filelength, 64, 0);
        //发送文件内容
        for (int i = 0; i &amp;lt; mount - 1; i++)
        {
            send(new_server_socket, memaddr_array[i], MemoryChunk, 0);
        }
        send(new_server_socket, memaddr_array[mount - 1], last_size, 0);

        //关闭与客户端的连接
        close(new_server_socket);
    }

    //释放资源 关闭监听用的socket
    close(server_socket);
    fclose(pFile);
    for (int i = 0; i &amp;lt; mount; i++)
    {
        free(memaddr_array[i]);
    }
    free(memaddr_array);
    return 0;
}
</code></pre><p>如上所示，最初版本的读取文件和发送都是串行的，后面将会继续优化。</p>
<p>##文件读取客户端</p>
<p>有了服务端，那么我们就要想办法连接TCP，然后将收到的信息存到文件中去。其处理次序与发送相逆，当recv到数据后，append到文件中去，然后对数据进行逐条解析。</p>
<pre><code>//客户端代码

//本文件是客户机的代码
#include &lt;netinet in.h=&quot;&quot;&gt;    // for sockaddr_in
#include &lt;sys types.h=&quot;&quot;&gt;    // for socket
#include &lt;sys socket.h=&quot;&quot;&gt;    // for socket
#include &lt;stdio.h&gt;        // for printf
#include &lt;stdlib.h&gt;        // for exit
#include &lt;string.h&gt;        // for bzero
#include &lt;time.h&gt;                //for time_t and time
#include &lt;arpa inet.h=&quot;&quot;&gt;

#define SERVER_PORT    7754         // server port
#define BUFFER_SIZE 1024            // write to file buffer

#define FILE_OFFSET_BITS 64         // filesize string offset
#define MEMORY_CHUNK_SIZE 16777216  // 16MB
#define DEFAULT_SERVER_IP &quot;127.0.0.1&quot;
#define FILE_PATH  &quot;data/1.client.dat&quot;

// 钟点工
struct Worker{
    int _id;
    char _gender;
    char _age;
    float _score;
};

// 订单
struct Bill{
    int _id;
    double _px;
    double _py;
    char _time;
    char _time_require;
    int _begin_time;
    char* _image;

};



// download module
 // by bibo 2015-08-25
void download_file(char* server_ip, int port)
{
    time_t start, end;
    time(&amp;amp;start);

    FILE *stream;

    //设置一个socket地址结构client_addr,代表客户机internet地址, 端口
    struct sockaddr_in client_addr;
    bzero(&amp;amp;client_addr, sizeof(client_addr)); //把一段内存区的内容全部设置为0
    client_addr.sin_family = AF_INET;    //internet协议族
    client_addr.sin_addr.s_addr = htons(INADDR_ANY);//INADDR_ANY表示自动获取本机地址
    client_addr.sin_port = htons(0);    //0表示让系统自动分配一个空闲端口

    //创建用于internet的流协议(TCP)socket,用client_socket代表客户机socket
    int client_socket = socket(AF_INET, SOCK_STREAM, 0);
    if( client_socket &amp;lt; 0) {
        printf(&quot;Create Socket Failed!\n&quot;);
        exit(1);
    }
    //把客户机的socket和客户机的socket地址结构联系起来
    if( bind(client_socket, (struct sockaddr*)&amp;amp;client_addr, sizeof(client_addr))) {
        printf(&quot;Client Bind Port Failed!\n&quot;);
        exit(1);
    }

    //设置一个socket地址结构server_addr,代表服务器的internet地址, 端口
    struct sockaddr_in server_addr;
    bzero(&amp;amp;server_addr, sizeof(server_addr));
    server_addr.sin_family = AF_INET;
    //服务器的IP地址来自程序的参数
    if(inet_aton(server_ip, &amp;amp;server_addr.sin_addr) == 0) {
        printf(&quot;Server IP Address Error!\n&quot;);
        exit(1);
    }

    server_addr.sin_port = htons(port);
    socklen_t server_addr_length = sizeof(server_addr);

    //向服务器发起连接, 连接成功后client_socket代表了客户机和服务器的一个socket连接
    if (connect(client_socket, (struct sockaddr*)&amp;amp;server_addr, server_addr_length) &amp;lt; 0) {
        printf(&quot;Can Not Connect To %s!\n&quot;, server_ip);
        exit(1);
    }

    char buffer[BUFFER_SIZE];
    bzero(buffer, BUFFER_SIZE);

    //从服务器接收数据到buffer中
    int length = recv(client_socket, buffer, BUFFER_SIZE, 0);

    if(length &amp;lt; 0) {
        printf(&quot;Recieve Data From Server %s Failed!\n&quot;, server_ip);
        exit(1);
    }

    // 先接收长度
    long lSize;
    lSize = sscanf(buffer,&quot;%ld&quot;, &amp;amp;lSize); // char array to long

    printf(&quot;\n%s\n&quot;, buffer);
    bzero(buffer, BUFFER_SIZE);

    // open or create file
    if ((stream = fopen(&quot;data&quot;,&quot;wb+&quot;)) == NULL) {
        printf(&quot;The file &apos;data&apos; was not opened! \n&quot;);
    }
    else
    {
        bzero(buffer, BUFFER_SIZE);
    }

    length = 0;
    // 后续是否使用多线程 TODO
    while (length = recv(client_socket, buffer, BUFFER_SIZE, 0)) {
        if (length &amp;lt; 0) {
            printf(&quot;Recieve Data From Server %s Failed!\n&quot;, server_ip);
            break;
        }

        int write_length = fwrite(buffer, sizeof(char), length, stream);
        if (write_length &amp;lt; length) {
            printf(&quot;File is Write Failed\n&quot;);
            break;
        }

        printf(&quot;write data to file!\n&quot;);

        bzero(buffer, BUFFER_SIZE);
    }
    printf(&quot;Recieve File From Server[%s] Finished\n&quot;, server_ip);

    fclose(stream);
    close(client_socket);

    time(&amp;amp;end);
    double t = difftime(end, start);
    printf(&quot;download file use: %f &quot;, t);

}


//解析文件
// by bibo 2015-08-25

void parse_file()
{
    time_t start, end;
    time(&amp;amp;start);

    //--------parse---------

    FILE* stream;
    if ((stream = fopen( FILE_PATH , &quot;rb&quot;)) == NULL)
    {
        printf(&quot;The file &apos;data&apos; was not opened! \n&quot;);
        exit(0);
    }


    // 钟点工 = 长度 + 记录类型（0） + ID + 性别 + 年龄 + 评分
    // 15 字节 = 4 + 1 + 4 + 1 + + 1 + 4

    // 需求 = 长度 + 记录类型 （1）+ ID + 横坐标 + 纵坐标 + 时长 + 时间要求 + 起始时间 + 图片？
    // ? = 4 + 1 + 4 + 8 + 8 + 1 + 1 + 4 + ？


    printf(&quot;int %ld \n&quot;, sizeof(int));
    printf(&quot;short %ld \n&quot;, sizeof(short));
    printf(&quot;float %ld \n&quot;, sizeof(float));
    printf(&quot;long %ld \n&quot;, sizeof(long));
    printf(&quot;char %ld \n&quot;, sizeof(char));

    char buffer[BUFFER_SIZE];
    bzero(buffer, BUFFER_SIZE);


    int record_size = 0;
    long length = 0;

    int bill_num = 0;
    int worker_num = 0;

    // TODO 想办法将结构树体放到某个数据结构中去存储并计算
    // 2G数据，必须要进行分治才能高效计算

    // 读取文件到内存中
    while (length = fread(&amp;amp;record_size, sizeof(int), 1, stream)) {

        // 长度
        // printf(&quot;record size: %d \n&quot;, record_size);
        char type = 0;

        //
        int i = 0;
        char c = 0;
        long l = 0;
        float f = 0;
        double d = 0;


        length = fread(&amp;amp;type, sizeof(char), 1, stream);

        // type
        if (type == 0)
        {
            struct Worker worker;

            fread(&amp;amp;i, sizeof(int), 1, stream); // ID
            worker._id = i;

            fread(&amp;amp;c, sizeof(char), 1, stream); // gender
            worker._gender = c;

            fread(&amp;amp;c, sizeof(char), 1, stream); // age
            worker._age = c;

            fread(&amp;amp;f, sizeof(float), 1, stream); // score
            worker._score = f;

            printf(&quot;get a worker: %d, %d, %d, %f \n&quot;, worker._id, worker._gender, worker._age, worker._score);

            // free(&amp;amp;worker);

            worker_num++;

        }
        else if (type == 1)
        {
            struct Bill bill;

            fread(&amp;amp;i, sizeof(int), 1, stream); // ID
            bill._id = i;

            fread(&amp;amp;d, sizeof(double), 1, stream); // px
            bill._px = d;

            fread(&amp;amp;d, sizeof(double), 1, stream);// py
            bill._py = d;

            fread(&amp;amp;c, sizeof(char), 1, stream); // time
            bill._time = c;

            fread(&amp;amp;c, sizeof(char), 1, stream); // time_require
            bill._time_require = c;

            if (bill._time_require == 1) // 有时间要求
            {
                fread(&amp;amp;i, sizeof(int), 1, stream);
                bill._begin_time = i;

                // 直接略过
                fseek(stream, sizeof(char) * ( record_size - 27 - 4), SEEK_CUR);

                // bill._image = (char*) malloc(sizeof(char) * (record_size - 27 - 4));
                // fread(bill._image, sizeof(char), record_size - 27 - 4, stream);
            }
            else
            {
                bill._begin_time = 0;

                // 直接略过
                fseek(stream, sizeof(char) * ( record_size - 27), SEEK_CUR);

                // bill._image = (char*)malloc(sizeof(char) * (record_size - 27));
                // fread(bill._image, sizeof(char), record_size - 27 , stream);

            }

            printf(&quot;get a bill: %d, %f, %f, %d, %d, %d, %s \n&quot;, bill._id, bill._px, bill._py, bill._time, bill._time_require, bill._begin_time, bill._image);

            // 暂时不存储
            free(bill._image);

            bill_num ++;
        }
    }




    //---------------------
    // show time
    time(&amp;amp;end);
    double t = difftime(end, start);
    printf(&quot;parse file use time: %lf \n&quot;, t);

    printf(&quot;total worker num: %d \n&quot;, worker_num);
    printf(&quot;total bill num: %d \n&quot;, bill_num);

    scanf(&quot;pleas press key to exit: %lf \n &quot;, &amp;amp;t);
    return;
}

// 解析记录
void parse_record()
{
    return;
}

//---------------------Main-----------------------
int main(int argc, char **argv)
{
    if (argc != 2) {
        printf(&quot;Usage: ./%s ServerIPAddress\n&quot;, argv[0]);
        argv[1] = DEFAULT_SERVER_IP;
        // exit(1);
    }


    download_file(argv[1], SERVER_PORT);

    parse_file();

    return 0;
}
</code></pre><p>最终，此次兴趣比赛，因为我们个人没有时间最终没有提交完整的代码。不过，我们最终还是得到了一件文化衫，当时报名也就是为了一件 <code>Talk is cheap , Show me the code</code> 的 T-Shirt，因为于Linux的服务器编程，我们IT部并不在行，而架构平台部，安全平台部比较在行，在决赛的晚会中，他们展示的方案想法其实也差不多，就看谁能够有这么强的代码能力付诸实现。</p>
<p>–end–<br>by biboedeng 2015-11-01&lt;/time.h&gt;&lt;/string.h&gt;&lt;/stdlib.h&gt;&lt;/stdio.h&gt;&lt;/time.h&gt;&lt;/string.h&gt;&lt;/stdlib.h&gt;&lt;/stdio.h&gt;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/11/商业头脑的两件小事/" itemprop="url">
                  商业头脑的两件小事
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-10-11T00:07:45+08:00" content="2015-10-11">
              2015-10-11
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2015/10/11/商业头脑的两件小事/" class="leancloud_visitors" data-flag-title="商业头脑的两件小事">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
<p style="font-family:'Helvetica Neue';font-size:14px;line-height:normal;widows:auto;">最近听闻我的一个大学舍友要在所在的大城市买房了，感叹同样是毕业一年的学生，怎么赚钱的能力差那么大呢。</p>
<p style="font-family:'Helvetica Neue';font-size:14px;line-height:normal;widows:auto;"></p>
<p style="font-family:'Helvetica Neue';font-size:14px;line-height:normal;widows:auto;">我大学毕业以来，进入BAT其中的T工作，而他进入的公司后来被A收购，工资算起来都差不多，但是很要命的是，我们的收入差距居然这么巨大，我到如今所有的积蓄加起来也才那么一点，老家的首付都还远远不够，这令我有点诧异。据我观察，潮汕的同学，有许多都肯动脑筋去想怎么赚钱，而一些专业领域的秘密，正是源源不断的钱的发源地。大学的时候，室友先是开发了一个App挂在未知名的广告平台上供人下载源码，结果收入并不多，一次几毛钱，最终也才累积到十几块钱，后来又开发了一个山寨的flappy bird游戏，虽然使用游戏引擎做起来并不算很复杂，但是借这个势头，在各个广告平台投放广告，赚到了第一桶金，对于尚在学校的我们来说，还算比较客观，而这种轻松的赚钱方法是拼命工作所无法比拟的。可以想见，进入一个游戏广告公司，知道了这种盈利的方式，这就是一种壁垒或者叫商业秘密，一般人不得门而入，但是也不能说是永远无门的，因为只要你开始接触这个领域，做了一款App，接入某个广告平台，你就会越来越深入地窥探到其中的秘密。可以这么说，对于商机，你需要留意并且钻营，一开始可能很小，小到你不以为意，但是当你发现一个大的秘密的时候，赚大钱的机会就来了。</p>
<p style="font-family:'Helvetica Neue';font-size:14px;line-height:normal;widows:auto;"></p>
<p style="font-family:'Helvetica Neue';font-size:14px;line-height:normal;widows:auto;">另外一个女同学，刚好也是潮汕人，她自己运营了一个微信公众账号，运用一些营销的手法，如推广公众号，写一些相关文章，竟然使得阅读量能够达到上千，而我久久经营的公众号，因为许久不更新，而订阅量越来越少。我细细一想其中的差别，潮汕的同学的商业头脑，体现在他们能够想办法去把一些与人有关，与钱有关的资源运营和控制起来，从而就把握住了一些商机。而我自己，虽然也在运营，但更多的是出于一种兴趣，想要尝试一下而已，或者说比较清高，只是写自己想写的，没有想着怎么去运用一些营销手段。另外一个我没有做好的地方，是我应当多写一点对别人有益的东西，做到言之有物，而不仅仅是在倾诉着自己的遭遇，于别人有价值，别人才会赋予它价值。</p>
<p style="font-family:'Helvetica Neue';font-size:14px;line-height:normal;widows:auto;"></p>
<p style="font-family:'Helvetica Neue';font-size:14px;line-height:normal;widows:auto;">by bibodeng 2015-10-11</p>
<p style="font-family:'Helvetica Neue';font-size:14px;line-height:normal;widows:auto;"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/13/大城小爱/" itemprop="url">
                  大城小爱
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-09-13T00:51:18+08:00" content="2015-09-13">
              2015-09-13
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2015/09/13/大城小爱/" class="leancloud_visitors" data-flag-title="大城小爱">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
今天，是我和你在一起五个月，很快，我们就要结束异地，相聚在同一个城市了。

做出这个决定，我相信你也是用了很大的勇气，毕竟要来到一个陌生的城市，开始全新的生活。当然想到，能够常常见到，在一个环境很好天空很蓝的城市，一同奋斗，这份小小的爱，在大城里应该会很甜蜜。

当初追求你的时候，我常常跑去广州，但是并不总是能够见到，有时候是你拒绝，有时候是没时间，总算有一次，大家说出来去沙面游玩，才跟着一起去，非常想能见到你，结果那天玩的还算挺开心的，拍了一些照片，获得了好评，当时跟你也踊跃地拍了几张合照，其中一张在门的两边，一张站在窗台上，笑的都挺好的，最后，我鼓起勇气和你合照了一张，并斗胆把手搭在了你的肩上，据说那个举动吓到了你，但总算是有了一个小小的开端。

过了不久，是她的生日，我叫上了她的好闺蜜，策划了一个属于我们江头小伙伴的party，准备party之前，彬彬，雄洲，我们三个先去踩点，终于到了生日那天，我们在维多利广场吃饭，然后到钱柜去唱K。晚饭的时候，都还比较尴尬，小伙伴们也算是借这个机会聚了一下，当天晚上准备了蛋糕，吃完饭出来夜色刚刚好，橘黄色的灯照耀着优衣库下面的小广场，一切是这么地美好，然后就去唱k了，途中，只和你说了几句话，稍微没有那么尴尬了。唱K途中由于紧张，唱得不好，只是好基友们在一起烘托氛围，热情献唱。直到吃过蛋糕，已经很晚了，大家都已经回去，剩下我的几个基友，还有你的好闺蜜钟，表白的过程异常艰辛，我好不容易鼓起勇气，却又不敢看你，不敢和你说话，直到十二点多，才鼓起勇气坐过去，聊了一下，拿出电脑播放我制作的幻灯片，期间几个照片你笑了，然后送上生日礼物—— 一本专属相册，一个QQ公仔，想不到你居然欣然接受。播完视频，气氛再度冷落下来，我没有勇气说出最重要的话，待在一旁踟蹰。最后被钟一脚踢过去了，才鼓起勇气表白了，两个人说了一些悄悄话，最后我问，愿不愿意做我的女朋友，你显得非常紧张，我想去拉你的手，你却把它压在大腿下，最后硬牵了一会，然后你说要好好考虑。这个时候钟不知道对你说了什么，然后你就笑了，当我再次问的时候，就说答应了，这个时候好基友们在唱《今年你要嫁给我》等很欢快的歌，我顺利地牵起了女神的手一起欢唱这最后一首歌，必须给亲爱的小伙伴们点赞。可是，这时候的我，却异常地平静，好友们却激动得不行，仿佛自己恋爱了一般。我知道，我得到了一个好女孩，还有非常好朋友在身边，很幸福。

回去睡了一觉，回到已经非常晚了，我非常平静，好基友们在激动地谈论，或者是感叹就我有女朋友了，他们都还单身哪，这么卖力，是不是要我把袜子，内裤都帮他们洗了。第二天醒来，发现莫名地想念，非常想见到你。于是第二天专门请了一天假，去和心爱的你约会，第一次约会，谈了很多很多，从中午谈到下午，然后依依不舍地分别了，地铁关上门那一刻，都忍不住多看对方两眼。我坐在高铁上，看着窗外的夜景，居然哭了，哭得稀里哗啦的，十年前，我开始喜欢你，中间几经波折，也许久不联系，但是最终，我们真的走在了一起，这一切的想念，委屈，高兴都在这一刻爆发了。



后来，你告诉我，那天晚上你心动了，我们是两情相悦。你还告诉我，我穿着白色衬衫的样子很帅，而我觉得你穿着白色上衣的样子，不可替代。如今看起来，都觉得很不可思议，当时是多么尴尬，而现在却又是那么地甜蜜，一切都是最好的安排。有时候我会有很强的预感，预感到我人生的一些旅程场景，而对于你，异常强烈。每一段爱情故事，都是那么传奇，而在一起之后，过得却是平淡的生活，没有那么传奇，却是实在的开心。祝愿有情人终成眷属。

by bibodeng 2015-09-12

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/07/01/本地安装NuGet包/" itemprop="url">
                  本地安装NuGet包
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-07-01T10:56:02+08:00" content="2015-07-01">
              2015-07-01
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2015/07/01/本地安装NuGet包/" class="leancloud_visitors" data-flag-title="本地安装NuGet包">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#本地安装NuGet包</p>
<p>由于内部开发时使用的是开发域的网络，Visual Studio中的包管理器无法通过网络访问NuGet仓库，故而我们需要想办法来通过下载到包，然后手动安装到我们的项目中。</p>
<p>##第一步 下载NuGet包</p>
<p>可以通过NuGet网站 <code>https://www.nuget.org/</code> 来查找要安装的包，记住包名PackageId。</p>
<pre><code>https://www.nuget.org/api/v2/package/{packageId}/{version}
</code></pre><p>以包 <code>Microsoft.AspNet.WebApi</code> 为例，下面通过链接来下载该包的5.2.3版本，在浏览器中输入</p>
<pre><code>https://www.nuget.org/api/v2/package/Microsoft.AspNet.WebApi/5.2.3
</code></pre><p>将下载到的NuGet包拷贝到开发机中的本地硬盘某个位置。</p>
<p>##第二步 安装NuGet包</p>
<p>要安装NuGet包，需要在项目中打开NuGet Manager, 选中项目，右键点击菜单，选中Manage NuGet Package，然后点击 Setting进入到设置界面， 配置添加一个源到Package Source中，待会在安装中即可选择这个本地源了。</p>
<p><img src="http://www.bibodeng.com/content/plugins/kl_album/upload/201507/216964db532c1a9231695eed0bac46c5201507011058361414530903.png" alt="Manage NuGet Package界面"></p>
<p>Manage NuGet Package界面</p>
<p><img src="http://www.bibodeng.com/content/plugins/kl_album/upload/201507/6e85d7818d8da83fd4f6cba85313c94c201507011058361170095749.png" alt="添加本地源"></p>
<p>添加本地源</p>
<p>添加完本地源后，例子中我们添加了一个localNuGet，地址是E盘下的nuget目录。刚刚我们把下载到的NuGet包放在了这里，今后要安装包，从这里选择即可。再次打开Manage NuGet Package界面，即可看到Online菜单下面有我们添加的localNuget源了，从里面可以选中我们要安装的包进行安装。</p>
<p><img src="http://www.bibodeng.com/content/plugins/kl_album/upload/201507/ca3e2db8d762a134508a330ceef67def201507011058361783180342.png" alt="从本地源安装包"></p>
<p>从本地源安装包</p>
<p>##后记<br>在安装一些依赖很多的包的时候，常常出现无法解决依赖的错误，依赖无法满足则包不能被安装成功。所以本地源手动安装包非常麻烦，需要把依赖的包都安装好后，才能安装自己想要安装的那个包，不像联网的时候需要什么包就自动去根据依赖去获取，而且这些包的依赖，各种版本虽然能够对应，但保不齐不出什么问题。所以能够联网安装包尽量联网安装，这样省心省力。</p>
<p>另外，推荐一个Web API文档自动生成的工具swagger，可以通过NuGet安装Swashbuckle来引入，祝开发愉快！</p>
<p>by bibodeng 2015-07-01</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/06/26/RSA算法长文本加密/" itemprop="url">
                  RSA算法长文本加密
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-06-26T16:49:19+08:00" content="2015-06-26">
              2015-06-26
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2015/06/26/RSA算法长文本加密/" class="leancloud_visitors" data-flag-title="RSA算法长文本加密">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
<div style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;font-size:14px;line-height:21px;widows:auto;">RSA是最常用的非对称加密算法，公钥用于加密，私钥用来解密。私钥还可以用来签名，公钥可以认证该签名。<span style="font-size:10.5pt;line-height:1.5;">我们可以使用生成的公钥和密钥进行RSA的加密和解密，简单的文本加解密如下，主要思路就是，根据传入的密钥，构造Provider，然后使用Provider执行加解密操作。使用公钥加密完成后，可以转换成Base64编码，也可以保存在Byte[]，响应地解密时需要传入Byte[]类型的密文。</span></div>
<div style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;font-size:14px;line-height:21px;widows:auto;"><br>
</div>
<div style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;font-size:14px;line-height:21px;widows:auto;"><div><pre class="prettyprint linenums prettyprinted" style="font-size:13px;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;background-color:#f7f7f9;padding:10px;border:1px solid #e1e1e8;tab-size:4;box-shadow:#fbfbfc 40px 0px 0px inset, #ececf0 41px 0px 0px inset;"><div class="linenums" style="color:#1e347b;margin-top:0px;margin-bottom:0px;padding-left:0px;"><div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="com" style="color:#93a1a1;">//string xmlPublicKey : xml 格式的公钥字符串</span></code></div>
<div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="com" style="color:#93a1a1;">//string m_strEncryptString: 明文字符串</span></code></div>
<div class="L2" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="kwd" style="color:#1e347b;">public</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">static</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RSAEncrypt</span><span class="pun" style="color:#93a1a1;">(</span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> xmlPublicKey</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> plainText</span><span class="pun" style="color:#93a1a1;">)</span></code></div>
<div class="L3" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pun" style="color:#93a1a1;">{</span></code></div>
<div class="L4" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="typ" style="color:teal;">RSACryptoServiceProvider</span><span class="pln" style="color:#48484c;"> provider </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">new</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RSACryptoServiceProvider</span><span class="pun" style="color:#93a1a1;">();</span></code></div>
<div class="L5" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	provider</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">FromXmlString</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">xmlPublicKey</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L6" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="kwd" style="color:#1e347b;">byte</span><span class="pun" style="color:#93a1a1;">[]</span><span class="pln" style="color:#48484c;"> bytes </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">new</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">UnicodeEncoding</span><span class="pun" style="color:#93a1a1;">().</span><span class="typ" style="color:teal;">GetBytes</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">plainText</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L7" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="kwd" style="color:#1e347b;">return</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">Convert</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">ToBase64String</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">provider</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">Encrypt</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">bytes</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">false</span><span class="pun" style="color:#93a1a1;">));</span></code></div>
<div class="L8" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pun" style="color:#93a1a1;">}</span></code></div>
<div class="L9" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;">
</div>
<div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="com" style="color:#93a1a1;">//string xmlPrivateKey ：xml 格式的私钥字符串</span></code></div>
<div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="com" style="color:#93a1a1;">//string encryptedText : 解密字符串</span></code></div>
<div class="L2" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="kwd" style="color:#1e347b;">public</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">static</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RSADecrypt</span><span class="pun" style="color:#93a1a1;">(</span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> xmlPrivateKey</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> encryptedText</span><span class="pun" style="color:#93a1a1;">)</span></code></div>
<div class="L3" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pun" style="color:#93a1a1;">{</span></code></div>
<div class="L4" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="typ" style="color:teal;">RSACryptoServiceProvider</span><span class="pln" style="color:#48484c;"> provider </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">new</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RSACryptoServiceProvider</span><span class="pun" style="color:#93a1a1;">();</span></code></div>
<div class="L5" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	provider</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">FromXmlString</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">xmlPrivateKey</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L6" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="kwd" style="color:#1e347b;">byte</span><span class="pun" style="color:#93a1a1;">[]</span><span class="pln" style="color:#48484c;"> rgb </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">Convert</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">FromBase64String</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">encryptedText</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L7" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="kwd" style="color:#1e347b;">byte</span><span class="pun" style="color:#93a1a1;">[]</span><span class="pln" style="color:#48484c;"> bytes </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> provider</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">Decrypt</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">rgb</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">false</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L8" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="kwd" style="color:#1e347b;">return</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">new</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">UnicodeEncoding</span><span class="pun" style="color:#93a1a1;">().</span><span class="typ" style="color:teal;">GetString</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">bytes</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L9" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pun" style="color:#93a1a1;">}</span></code></div>
</div>
</pre></div>
<div>下面用一个例子进行测试：</div>
</div>
<div style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;font-size:14px;line-height:21px;widows:auto;"><pre class="prettyprint linenums prettyprinted" style="font-size:13px;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;background-color:#f7f7f9;padding:10px;border:1px solid #e1e1e8;tab-size:4;box-shadow:#fbfbfc 40px 0px 0px inset, #ececf0 41px 0px 0px inset;"><div class="linenums" style="color:#1e347b;margin-top:0px;margin-bottom:0px;padding-left:0px;"><div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="com" style="color:#93a1a1;">// RSAUtil类，可以用来模拟生成公钥和私钥</span></code></div>
<div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="kwd" style="color:#1e347b;">public</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">class</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RSAUtil</span></code></div>
<div class="L2" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pun" style="color:#93a1a1;">{</span></code></div>
<div class="L3" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="kwd" style="color:#1e347b;">public</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RSACryptoServiceProvider</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RsaProvider</span><span class="pun" style="color:#93a1a1;">;</span></code></div>
<div class="L5" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="kwd" style="color:#1e347b;">public</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RSAUtil</span><span class="pun" style="color:#93a1a1;">()</span></code></div>
<div class="L6" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="pun" style="color:#93a1a1;">{</span></code></div>
<div class="L7" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="com" style="color:#93a1a1;">// 创建一对公钥私钥</span></code></div>
<div class="L8" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="typ" style="color:teal;">RsaProvider</span><span class="pln" style="color:#48484c;"> </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">new</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RSACryptoServiceProvider</span><span class="pun" style="color:#93a1a1;">();</span></code></div>
<div class="L9" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="pun" style="color:#93a1a1;">}</span></code></div>
<div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;">
</div>
<div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">/// &lt;summary&gt;</span></code></div>
<div class="L2" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">/// 获取RSA的公钥xml</span></code></div>
<div class="L3" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">/// &lt;/summary&gt;</span></code></div>
<div class="L4" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">/// &lt;returns&gt;&lt;/returns&gt;</span></code></div>
<div class="L5" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="kwd" style="color:#1e347b;">public</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">GetRSAPublicKeyXML</span><span class="pun" style="color:#93a1a1;">()</span></code></div>
<div class="L6" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="pun" style="color:#93a1a1;">{</span></code></div>
<div class="L7" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="kwd" style="color:#1e347b;">return</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RsaProvider</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">ToXmlString</span><span class="pun" style="color:#93a1a1;">(</span><span class="kwd" style="color:#1e347b;">false</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L8" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="pun" style="color:#93a1a1;">}</span></code></div>
<div class="L9" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;">
</div>
<div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">/// &lt;summary&gt;</span></code></div>
<div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">/// 返回公钥及私钥xml</span></code></div>
<div class="L2" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">/// &lt;/summary&gt;</span></code></div>
<div class="L3" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">/// &lt;returns&gt;&lt;/returns&gt;</span></code></div>
<div class="L4" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="kwd" style="color:#1e347b;">public</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">GetRSAKeyPairXML</span><span class="pun" style="color:#93a1a1;">()</span></code></div>
<div class="L5" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="pun" style="color:#93a1a1;">{</span></code></div>
<div class="L6" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="kwd" style="color:#1e347b;">return</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RsaProvider</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">ToXmlString</span><span class="pun" style="color:#93a1a1;">(</span><span class="kwd" style="color:#1e347b;">true</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L7" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="pun" style="color:#93a1a1;">}</span></code></div>
<div class="L8" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;">
</div>
<div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">/// &lt;summary&gt;</span></code></div>
<div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">/// 获取RSA的公钥</span></code></div>
<div class="L2" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">/// &lt;/summary&gt;</span></code></div>
<div class="L3" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">/// &lt;returns&gt;&lt;/returns&gt;</span></code></div>
<div class="L4" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="kwd" style="color:#1e347b;">public</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RSAParameters</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">GetRSAPublicKey</span><span class="pun" style="color:#93a1a1;">()</span></code></div>
<div class="L5" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="pun" style="color:#93a1a1;">{</span></code></div>
<div class="L6" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="kwd" style="color:#1e347b;">return</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RsaProvider</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">ExportParameters</span><span class="pun" style="color:#93a1a1;">(</span><span class="kwd" style="color:#1e347b;">false</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<p style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="pun" style="color:#93a1a1;">}</span></code></p>
<p style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pun" style="color:#93a1a1;"> </span></code></p>
<div class="L9" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">/// &lt;summary&gt;</span></code></div>
<div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">/// 返回公钥及私钥</span></code></div>
<div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">/// &lt;/summary&gt;</span></code></div>
<div class="L2" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">/// &lt;returns&gt;&lt;/returns&gt;</span></code></div>
<div class="L3" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="kwd" style="color:#1e347b;">public</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RSAParameters</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">GetRSAKeyPair</span><span class="pun" style="color:#93a1a1;">()</span></code></div>
<div class="L4" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="pun" style="color:#93a1a1;">{</span></code></div>
<div class="L5" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="kwd" style="color:#1e347b;">return</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RsaProvider</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">ExportParameters</span><span class="pun" style="color:#93a1a1;">(</span><span class="kwd" style="color:#1e347b;">true</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L6" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="pun" style="color:#93a1a1;">}</span></code></div>
<div class="L7" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pun" style="color:#93a1a1;">}</span></code></div>
</div>
</pre></div>
<div style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;font-size:14px;line-height:21px;widows:auto;"><div><pre class="prettyprint linenums prettyprinted" style="font-size:13px;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;background-color:#f7f7f9;padding:10px;border:1px solid #e1e1e8;tab-size:4;box-shadow:#fbfbfc 40px 0px 0px inset, #ececf0 41px 0px 0px inset;"><div class="linenums" style="color:#1e347b;margin-top:0px;margin-bottom:0px;padding-left:0px;"><div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="kwd" style="color:#1e347b;">class</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">Program</span><span class="pun" style="color:#93a1a1;">{</span></code></div>
<div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">// 测试</span></code></div>
<div class="L2" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="kwd" style="color:#1e347b;">public</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">static</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">void</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">TestRSA</span><span class="pun" style="color:#93a1a1;">()</span></code></div>
<div class="L3" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="pun" style="color:#93a1a1;">{</span></code></div>
<div class="L4" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="typ" style="color:teal;">RSAUtil</span><span class="pln" style="color:#48484c;"> rsaUtil </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">new</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RSAUtil</span><span class="pun" style="color:#93a1a1;">();</span></code></div>
<div class="L5" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="com" style="color:#93a1a1;">// 生成一对密钥</span></code></div>
<div class="L6" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="typ" style="color:teal;">RSAParameters</span><span class="pln" style="color:#48484c;"> params1 </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> rsaUtil</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">GetRSAPublicKey</span><span class="pun" style="color:#93a1a1;">();</span></code></div>
<div class="L8" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="typ" style="color:teal;">RSAParameters</span><span class="pln" style="color:#48484c;"> params2 </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> rsaUtil</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">GetRSAKeyPair</span><span class="pun" style="color:#93a1a1;">();</span></code></div>
<div class="L9" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;">
</div>
<div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> publicKey </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> rsaUtil</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">GetRSAPublicKeyXML</span><span class="pun" style="color:#93a1a1;">();</span></code></div>
<div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> privateKey </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> rsaUtil</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">GetRSAKeyPairXML</span><span class="pun" style="color:#93a1a1;">();</span></code></div>
<div class="L2" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;">
</div>
<div class="L4" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="com" style="color:#93a1a1;">// 下面尝试加密解密</span></code></div>
<div class="L5" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> msg </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="str" style="color:#dd1144;">@"hello world"</span><span class="pun" style="color:#93a1a1;">;</span></code></div>
<div class="L8" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> encodeMsg </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RSAEncrypt</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">publicKey</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> msg</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L9" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> decodeMsg </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RSADecrypt</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">privateKey</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> encodeMsg</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="typ" style="color:teal;">Console</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">WriteLine</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">decodeMsg</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="pun" style="color:#93a1a1;">}</span></code></div>
<div class="L2" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pun" style="color:#93a1a1;">}</span></code></div>
</div>
</pre></div>
<div><br>
</div>
<div>在Main函数中运行该TestRSA()函数，结果为正确helllo world，说明解密成功。然而这样的做法存在问题，当明文长度过长，则以上函数无法使用，因为RSA1024只能加密117个字节以内的数据。<span style="font-size:10.5pt;line-height:1.5;">RSA算法能够对数据进行非对称加密，但是非对称加密的成本是很高的。1024bit的密钥，只能加密1024 / 8 - 11 = 117字节长度的明文，生成的密文长度最大为1024/8=128字节（此外RSA的签名能够生成一个和密钥长度相等的签名，用C#内置的Verify方法可以进行验证）。故而我们需要重写我们的加解密函数，按最大117一组来进行加密，反之，按最大128字节一组来解密。</span></div>
</div>
<div style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;font-size:14px;line-height:21px;widows:auto;"><span style="font-size:10.5pt;line-height:1.5;"><br>
</span></div>
<div style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;font-size:14px;line-height:21px;widows:auto;"><div><pre class="prettyprint linenums prettyprinted" style="font-size:13px;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;background-color:#f7f7f9;padding:10px;border:1px solid #e1e1e8;tab-size:4;box-shadow:#fbfbfc 40px 0px 0px inset, #ececf0 41px 0px 0px inset;"><div class="linenums" style="color:#1e347b;margin-top:0px;margin-bottom:0px;padding-left:0px;"><div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="kwd" style="color:#1e347b;">public</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">static</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RSAEncryptForLongString</span><span class="pun" style="color:#93a1a1;">(</span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> xmlPublicKey</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> plainText</span><span class="pun" style="color:#93a1a1;">)</span></code></div>
<div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pun" style="color:#93a1a1;">{</span></code></div>
<div class="L3" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="typ" style="color:teal;">RSACryptoServiceProvider</span><span class="pln" style="color:#48484c;"> provider </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">new</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RSACryptoServiceProvider</span><span class="pun" style="color:#93a1a1;">();</span></code></div>
<p style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	provider</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">FromXmlString</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">xmlPublicKey</span><span class="pun" style="color:#93a1a1;">);</span></code></p>
<p style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pun" style="color:#93a1a1;"> </span></code></p>
<div class="L6" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="typ" style="color:teal;">Byte</span><span class="pun" style="color:#93a1a1;">[]</span><span class="pln" style="color:#48484c;"> plainTextData </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">Encoding</span><span class="pun" style="color:#93a1a1;">.</span><span class="pln" style="color:#48484c;">UTF8</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">GetBytes</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">plainText</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L8" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="typ" style="color:teal;">int</span><span class="pln" style="color:#48484c;"> maxBlockSize </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> provider</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">KeySize</span><span class="pln" style="color:#48484c;"> </span><span class="pun" style="color:#93a1a1;">/</span><span class="pln" style="color:#48484c;"> </span><span class="lit" style="color:#195f91;">8</span><span class="pln" style="color:#48484c;"> </span><span class="pun" style="color:#93a1a1;">-</span><span class="pln" style="color:#48484c;"> </span><span class="lit" style="color:#195f91;">11</span><span class="pun" style="color:#93a1a1;">;</span></code></div>
<div class="L9" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;">
</div>
<div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="kwd" style="color:#1e347b;">if</span><span class="pln" style="color:#48484c;"> </span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">plainTextData</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">Length</span><span class="pln" style="color:#48484c;"> </span><span class="pun" style="color:#93a1a1;">&lt;=</span><span class="pln" style="color:#48484c;"> maxBlockSize</span><span class="pun" style="color:#93a1a1;">)</span><span class="pln" style="color:#48484c;">   </span><span class="com" style="color:#93a1a1;">// 长度不满一节</span></code></div>
<div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="pun" style="color:#93a1a1;">{</span></code></div>
<div class="L2" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="kwd" style="color:#1e347b;">return</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">Convert</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">ToBase64String</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">provider</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">Encrypt</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">plainTextData</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">false</span><span class="pun" style="color:#93a1a1;">));</span></code></div>
<div class="L3" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="pun" style="color:#93a1a1;">}</span></code></div>
<div class="L4" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;">
</div>
<div class="L5" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">// 超长</span></code></div>
<div class="L6" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	using </span><span class="pun" style="color:#93a1a1;">(</span><span class="typ" style="color:teal;">MemoryStream</span><span class="pln" style="color:#48484c;"> plainStream </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">new</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">MemoryStream</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">plainTextData</span><span class="pun" style="color:#93a1a1;">))</span></code></div>
<div class="L7" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	using </span><span class="pun" style="color:#93a1a1;">(</span><span class="typ" style="color:teal;">MemoryStream</span><span class="pln" style="color:#48484c;"> cryptStream </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">new</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">MemoryStream</span><span class="pun" style="color:#93a1a1;">())</span></code></div>
<div class="L8" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="pun" style="color:#93a1a1;">{</span></code></div>
<div class="L9" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="com" style="color:#93a1a1;">// read from plainStream </span></code></div>
<div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="typ" style="color:teal;">Byte</span><span class="pun" style="color:#93a1a1;">[]</span><span class="pln" style="color:#48484c;"> buffer </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">new</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">Byte</span><span class="pun" style="color:#93a1a1;">[</span><span class="pln" style="color:#48484c;">maxBlockSize</span><span class="pun" style="color:#93a1a1;">];</span></code></div>
<div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="typ" style="color:teal;">int</span><span class="pln" style="color:#48484c;"> blockSize </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> plainStream</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">Read</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">buffer</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> </span><span class="lit" style="color:#195f91;">0</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> maxBlockSize</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L3" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="kwd" style="color:#1e347b;">while</span><span class="pln" style="color:#48484c;"> </span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">blockSize </span><span class="pun" style="color:#93a1a1;">&gt;</span><span class="pln" style="color:#48484c;"> </span><span class="lit" style="color:#195f91;">0</span><span class="pun" style="color:#93a1a1;">)</span></code></div>
<div class="L4" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="pun" style="color:#93a1a1;">{</span></code></div>
<div class="L5" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">			</span><span class="com" style="color:#93a1a1;">// 实际读取到的长度</span></code></div>
<div class="L6" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">			</span><span class="typ" style="color:teal;">Byte</span><span class="pun" style="color:#93a1a1;">[]</span><span class="pln" style="color:#48484c;"> toEncrypt </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">new</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">Byte</span><span class="pun" style="color:#93a1a1;">[</span><span class="pln" style="color:#48484c;">blockSize</span><span class="pun" style="color:#93a1a1;">];</span></code></div>
<div class="L7" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">			</span><span class="com" style="color:#93a1a1;">// 拷贝到toEncrypt</span></code></div>
<div class="L8" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">			</span><span class="typ" style="color:teal;">Array</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">Copy</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">buffer</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> </span><span class="lit" style="color:#195f91;">0</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> toEncrypt</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> </span><span class="lit" style="color:#195f91;">0</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> blockSize</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L9" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">			</span><span class="com" style="color:#93a1a1;">// 得到加密片段</span></code></div>
<div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">			</span><span class="typ" style="color:teal;">Byte</span><span class="pun" style="color:#93a1a1;">[]</span><span class="pln" style="color:#48484c;"> cryptograph </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> provider</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">Encrypt</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">toEncrypt</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">false</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L2" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">			</span><span class="com" style="color:#93a1a1;">// 放到输出流中</span></code></div>
<div class="L3" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">			cryptStream</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">Write</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">cryptograph</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> </span><span class="lit" style="color:#195f91;">0</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> cryptograph</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">Length</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L5" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">			blockSize </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> plainStream</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">Read</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">buffer</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> </span><span class="lit" style="color:#195f91;">0</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> maxBlockSize</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L6" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="pun" style="color:#93a1a1;">}</span></code></div>
<div class="L8" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="kwd" style="color:#1e347b;">return</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">Convert</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">ToBase64String</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">cryptStream</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">ToArray</span><span class="pun" style="color:#93a1a1;">());</span></code></div>
<div class="L9" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="pun" style="color:#93a1a1;">}</span></code></div>
<div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pun" style="color:#93a1a1;">}</span></code></div>
<div class="L2" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;">&nbsp;</code></div>
<div class="L3" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="kwd" style="color:#1e347b;">public</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">static</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RSADecryptForLongString</span><span class="pun" style="color:#93a1a1;">(</span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> xmlPrivateKey</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> encryptText</span><span class="pun" style="color:#93a1a1;">)</span></code></div>
<div class="L4" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pun" style="color:#93a1a1;">{</span></code></div>
<div class="L5" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="typ" style="color:teal;">RSACryptoServiceProvider</span><span class="pln" style="color:#48484c;"> provider </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">new</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RSACryptoServiceProvider</span><span class="pun" style="color:#93a1a1;">();</span></code></div>
<div class="L6" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	provider</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">FromXmlString</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">xmlPrivateKey</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L8" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="typ" style="color:teal;">Byte</span><span class="pun" style="color:#93a1a1;">[]</span><span class="pln" style="color:#48484c;"> encryptTextData </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">Convert</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">FromBase64String</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">encryptText</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="typ" style="color:teal;">Console</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">WriteLine</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">encryptTextData</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">Length</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L2" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">// 每个加密块最大长度</span></code></div>
<div class="L3" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="typ" style="color:teal;">int</span><span class="pln" style="color:#48484c;"> maxBlockSize </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> provider</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">KeySize</span><span class="pln" style="color:#48484c;"> </span><span class="pun" style="color:#93a1a1;">/</span><span class="pln" style="color:#48484c;"> </span><span class="lit" style="color:#195f91;">8</span><span class="pun" style="color:#93a1a1;">;</span></code></div>
<div class="L5" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">// 无需分段</span></code></div>
<div class="L6" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="kwd" style="color:#1e347b;">if</span><span class="pln" style="color:#48484c;"> </span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">encryptTextData</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">Length</span><span class="pln" style="color:#48484c;"> </span><span class="pun" style="color:#93a1a1;">&lt;</span><span class="pln" style="color:#48484c;"> maxBlockSize</span><span class="pun" style="color:#93a1a1;">)</span></code></div>
<div class="L7" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="pun" style="color:#93a1a1;">{</span></code></div>
<div class="L8" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="kwd" style="color:#1e347b;">return</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">Encoding</span><span class="pun" style="color:#93a1a1;">.</span><span class="pln" style="color:#48484c;">UTF8</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">GetString</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">provider</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">Decrypt</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">encryptTextData</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">false</span><span class="pun" style="color:#93a1a1;">));</span></code></div>
<div class="L9" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="pun" style="color:#93a1a1;">}</span></code></div>
<div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;">
</div>
<div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">// 需要分段</span></code></div>
<div class="L2" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	using </span><span class="pun" style="color:#93a1a1;">(</span><span class="typ" style="color:teal;">MemoryStream</span><span class="pln" style="color:#48484c;"> cryptStream </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">new</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">MemoryStream</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">encryptTextData</span><span class="pun" style="color:#93a1a1;">))</span></code></div>
<div class="L3" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	using </span><span class="pun" style="color:#93a1a1;">(</span><span class="typ" style="color:teal;">MemoryStream</span><span class="pln" style="color:#48484c;"> plainStream </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">new</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">MemoryStream</span><span class="pun" style="color:#93a1a1;">())</span></code></div>
<div class="L4" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="pun" style="color:#93a1a1;">{</span></code></div>
<div class="L5" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="typ" style="color:teal;">Byte</span><span class="pun" style="color:#93a1a1;">[]</span><span class="pln" style="color:#48484c;"> buffer </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">new</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">Byte</span><span class="pun" style="color:#93a1a1;">[</span><span class="pln" style="color:#48484c;">maxBlockSize</span><span class="pun" style="color:#93a1a1;">];</span></code></div>
<div class="L6" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		cryptStream</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">Position</span><span class="pln" style="color:#48484c;"> </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="lit" style="color:#195f91;">0</span><span class="pun" style="color:#93a1a1;">;</span></code></div>
<div class="L7" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="typ" style="color:teal;">int</span><span class="pln" style="color:#48484c;"> blockSize </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> cryptStream</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">Read</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">buffer</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> </span><span class="lit" style="color:#195f91;">0</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> maxBlockSize</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L8" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;">
</div>
<div class="L9" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="kwd" style="color:#1e347b;">while</span><span class="pln" style="color:#48484c;"> </span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">blockSize </span><span class="pun" style="color:#93a1a1;">&gt;</span><span class="pln" style="color:#48484c;"> </span><span class="lit" style="color:#195f91;">0</span><span class="pun" style="color:#93a1a1;">)</span></code></div>
<div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="pun" style="color:#93a1a1;">{</span></code></div>
<div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">			</span><span class="typ" style="color:teal;">Byte</span><span class="pun" style="color:#93a1a1;">[]</span><span class="pln" style="color:#48484c;"> toDecrypt </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">new</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">Byte</span><span class="pun" style="color:#93a1a1;">[</span><span class="pln" style="color:#48484c;">blockSize</span><span class="pun" style="color:#93a1a1;">];</span></code></div>
<div class="L2" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">			</span><span class="typ" style="color:teal;">Array</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">Copy</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">buffer</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> </span><span class="lit" style="color:#195f91;">0</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> toDecrypt</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> </span><span class="lit" style="color:#195f91;">0</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> blockSize</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L4" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">			</span><span class="typ" style="color:teal;">Byte</span><span class="pun" style="color:#93a1a1;">[]</span><span class="pln" style="color:#48484c;"> plainText </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> provider</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">Decrypt</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">toDecrypt</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">false</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L6" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">			plainStream</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">Write</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">plainText</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> </span><span class="lit" style="color:#195f91;">0</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> plainText</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">Length</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L8" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">			blockSize </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> cryptStream</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">Read</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">buffer</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> </span><span class="lit" style="color:#195f91;">0</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> maxBlockSize</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L9" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="pun" style="color:#93a1a1;">}</span></code></div>
<div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;">
</div>
<div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">		</span><span class="kwd" style="color:#1e347b;">return</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">Encoding</span><span class="pun" style="color:#93a1a1;">.</span><span class="pln" style="color:#48484c;">UTF8</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">GetString</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">plainStream</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">ToArray</span><span class="pun" style="color:#93a1a1;">());</span></code></div>
<div class="L2" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="pun" style="color:#93a1a1;">}</span></code></div>
<div class="L4" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pun" style="color:#93a1a1;">}</span></code></div>
</div>
</pre></div>
<div>测试运行：</div>
</div>
<div style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;font-size:14px;line-height:21px;widows:auto;"><div><pre class="prettyprint linenums prettyprinted" style="font-size:13px;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;background-color:#f7f7f9;padding:10px;border:1px solid #e1e1e8;tab-size:4;box-shadow:#fbfbfc 40px 0px 0px inset, #ececf0 41px 0px 0px inset;"><div class="linenums" style="margin-top:0px;margin-bottom:0px;padding-left:0px;"><div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="com" style="color:#93a1a1;">// 测试公钥私钥产生及加密</span></code></div>
<div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="kwd" style="color:#1e347b;">public</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">static</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">void</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">TestRSA</span><span class="pun" style="color:#93a1a1;">()</span></code></div>
<div class="L2" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pun" style="color:#93a1a1;">{</span></code></div>
<div class="L3" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="typ" style="color:teal;">RSAUtil</span><span class="pln" style="color:#48484c;"> rsaUtil </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="kwd" style="color:#1e347b;">new</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RSAUtil</span><span class="pun" style="color:#93a1a1;">();</span></code></div>
<div class="L4" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">// 生成一对密钥</span></code></div>
<div class="L5" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="typ" style="color:teal;">RSAParameters</span><span class="pln" style="color:#48484c;"> params1 </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> rsaUtil</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">GetRSAPublicKey</span><span class="pun" style="color:#93a1a1;">();</span></code></div>
<div class="L7" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="typ" style="color:teal;">RSAParameters</span><span class="pln" style="color:#48484c;"> params2 </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> rsaUtil</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">GetRSAKeyPair</span><span class="pun" style="color:#93a1a1;">();</span></code></div>
<div class="L8" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;">
</div>
<div class="L9" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> publicKey </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> rsaUtil</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">GetRSAPublicKeyXML</span><span class="pun" style="color:#93a1a1;">();</span></code></div>
<div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> privateKey </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> rsaUtil</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">GetRSAKeyPairXML</span><span class="pun" style="color:#93a1a1;">();</span></code></div>
<div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;">
</div>
<div class="L3" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">// 下面尝试加密解密</span></code></div>
<div class="L4" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> msg </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="str" style="color:#dd1144;">@"最近用了近两三天来翻完了《大话设计模式》这本书，</span></code></div>
<span style="color:#1e347b;"> </span><div class="L5" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="str" style="color:#dd1144;">	里面一一展示了29种设计模式，这些设计模式都是基于面向对象的，</span></code></div>
<span style="color:#1e347b;"> </span><div class="L6" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="str" style="color:#dd1144;">	根据各种法则推演出来，是面向对象的“类的结构”.</span></code></div>
<span style="color:#1e347b;"> </span><div class="L7" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="str" style="color:#dd1144;">	里面很多结构都是借鉴了生活中的一些解耦的思想，</span></code></div>
<span style="color:#1e347b;"> </span><div class="L8" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="str" style="color:#dd1144;">	我们开发的过程中应当有意识地在编写代码的时候怎么样让程序结构更好。</span></code></div>
<span style="color:#1e347b;"> </span><div class="L9" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="str" style="color:#dd1144;">	这其实是用一种面向对象的思想来思考程序的各个模块，</span></code></div>
<span style="color:#1e347b;"> </span><div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="str" style="color:#dd1144;">	而我们的世界本来就是各种对象的协作，</span></code></div>
<span style="color:#1e347b;"> </span><div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="str" style="color:#dd1144;">	我们是要让程序模拟我们的现实世界"</span><span class="pun" style="color:#93a1a1;">;</span></code></div>
<div class="L2" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;">
</div>
<div class="L4" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">// 根据上面生成的公钥进行加密</span></code></div>
<div class="L5" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> encodeMsg </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RSAEncryptFromStream</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">publicKey</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> msg</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L7" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="com" style="color:#93a1a1;">// 根据密钥进行解密</span></code></div>
<div class="L8" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="kwd" style="color:#1e347b;">string</span><span class="pln" style="color:#48484c;"> decodeMsg </span><span class="pun" style="color:#93a1a1;">=</span><span class="pln" style="color:#48484c;"> </span><span class="typ" style="color:teal;">RSADecryptFromStream</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">privateKey</span><span class="pun" style="color:#93a1a1;">,</span><span class="pln" style="color:#48484c;"> encodeMsg</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L0" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;"><code class="language-cs" style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;word-wrap:break-word;"><span class="pln" style="color:#48484c;">	</span><span class="typ" style="color:teal;">Console</span><span class="pun" style="color:#93a1a1;">.</span><span class="typ" style="color:teal;">WriteLine</span><span class="pun" style="color:#93a1a1;">(</span><span class="pln" style="color:#48484c;">decodeMsg</span><span class="pun" style="color:#93a1a1;">);</span></code></div>
<div class="L1" style="color:#bebec5;line-height:18px;padding-left:0px;list-style-type:none;">
</div>
<div class="L2" style="line-height:18px;padding-left:0px;list-style-type:none;"><span style="color:#93a1a1;">}</span></div>
</div>
</pre></div>
<div><br>
</div>
</div>
<div style="font-family:微软雅黑, 'Microsoft YaHei', Georgia, Helvetica, Arial, sans-serif, 宋体, PMingLiU, serif;font-size:14px;line-height:21px;widows:auto;">by bibodeng 2015-06-26</div>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/06/24/端午巽寮湾游记/" itemprop="url">
                  端午巽寮湾游记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-06-24T12:35:35+08:00" content="2015-06-24">
              2015-06-24
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2015/06/24/端午巽寮湾游记/" class="leancloud_visitors" data-flag-title="端午巽寮湾游记">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
<div id="paperTitleArea" align="center" class="lp_title_type_3" style="margin:0px 0px 35px 72px;padding:0px;height:70px;color:#444444;font-family:punctuation, 微软雅黑, Tohoma;line-height:19.2000007629395px;width:690px;background-image:url(http://ctc.qzs.qq.com/qzone/space_item/orig/9/81177_t5.gif);background-position:50% 50%;background-repeat:no-repeat;"><span id="paperTitle" style="text-align:left;margin:0px;padding:25px 0px 0px;display:block;word-break:break-all;color:#000000;"><br>
</span></div>
<div id="blogDetailDiv" data-webp-ctx-e="1" style="margin:0px;padding:0px;min-height:380px;font-family:punctuation, 微软雅黑, Tohoma;font-size:14px;"><div class="blog_details_20120222" style="margin:0px;padding:0px;">这是我们第一次结对出行，我和杨很早就想要去海边玩耍了，而雄洲戴戴也表示希望能够一起出去。于是我们就开始策划这次巽寮湾之行，莫名其妙确定了巽寮湾，但看照片风景也不错，我反复地确认卫星照片的沙滩如何及附近酒店方位，但结果证明我想多了，大海边总体还是很干净很辽阔的。<br>
<br>
在各种方案之间纠结，是选择自由行呢，还是选择跟团游，其实任何一个都应该不会太差，由于在不同的城市，需要先集合到一个城市出发。之前打算从广州出发，能够以比较实惠的价格住到海边的海景房酒店。但是打算从深圳出发，因为这样能够缩短坐车时间，恰好也可以方便集合。最后，我们决定跟一个深圳出发的团，可以住到海边的酒店，于是在途牛上下单了，只是端午的天气预报不太理想——雷阵雨，但我们的预言帝预言天气预报不准。<br>
<span style="margin:0px;padding:0px;"><br>
出行当天，天空湛蓝，飘着朵朵白云，天气晴朗，预言帝，你赢了。我们在深大北门集合，杨和戴戴第一次见，居然就互道姐妹，拥抱了一个，我和雄洲表示压力很大，看来她们组成了统一战线。不过这在我们的预料之中，我们无节操群的战线是如此统一，我们的友谊是如此牢固，我们的“洗脑”手段高超，在我们个人背后，是四个程序员的智慧。&nbsp;坐着车，一路上心情都很愉悦，出发前一晚都没怎么睡好，在车上睡了一觉，快要到了，拉开窗帘，看到大亚湾如此之美。蓝色海面上是蓝色天空，飘着朵朵白云，辽阔的湾面的海水看起来很清澈，而且小小的波澜和云的阴影，让这片海显得安静而又层次感十足，远近颜色都不一样。我们先来到一个海滩边，搭上快艇去乘风破浪，第一次坐快艇，虽然晃，但还是觉得算安全，我们多花了十块到远海的地方逛了一圈。上岸后我们就在沙滩上玩耍，沙滩上面不算很干净，但是下面还可以，有一阵阵的浪打上来。两位女士披上丝巾在海边戏水，我穿着运动鞋也脱了鞋子下海。然后相互拥抱，留下来在海边的第一张合影。平时很少假期，又有时空的距离，虽说又岂在朝朝暮暮，但难得有机会一起出游，都特别地开心。（非常逗的，我和雄洲一样高，两位女士也一样高，出行都带个旅行提包，还都带了丝巾，都那么有默契）<br>
<span style="margin:0px;padding:0px;">&nbsp;</span><div style="margin:0px;padding:0px;text-align:center;"><img alt="图片" src="http://a4.qpic.cn/psb?/V12qSyDE3QN5um/CzrfUQQRx0zq2G5D*wMiygxbsBlz6YaJCeOFdKjYsiU!/b/dAMAAAAAAAAA&amp;ek=1&amp;kp=1&amp;pt=0&amp;bo=vQQgAwAFTAMFCfo!&amp;su=2123916641&amp;sce=0-12-12&amp;rf=2-9" data-img-idx="0" data-src="http://a4.qpic.cn/psb?/V12qSyDE3QN5um/CzrfUQQRx0zq2G5D*wMiygxbsBlz6YaJCeOFdKjYsiU!/b/dAMAAAAAAAAA&amp;ek=1&amp;kp=1&amp;pt=0&amp;bo=vQQgAwAFTAMFCfo!&amp;su=2123916641&amp;sce=0-12-12&amp;rf=2-9" style="margin:0px;padding:0px;border-width:0px;border-style:none;vertical-align:top;width:847px;height:557.851724137931px;"></div>
<span style="margin:0px;padding:0px;"><br>
&nbsp;海边玩耍过后就是去吃午饭，午饭是平常的海鲜宴，濑尿虾还有花甲，鸡蛋蔬菜等。海参鲍鱼这些是没有的，不过还算可口，吃完之后就直奔天后宫了，在天后宫里面逗留了一两个小时，游览了一些周边的商业街。进去天后宫里面，拜了一下妈祖，齐齐上香许了三个愿望，许之前完全不知道许什么，可是许的时候居然思如泉涌。然后都累了，午后的太阳非常猛烈，于是找个地方坐下，喝杯饮料，聊聊天。隔壁的母子也坐在旁边午休，小孩趴在妈妈的身上睡得很熟，我们在旁边议论逗乐也完全不能打扰他。<span style="margin:0px;padding:0px;">累了半天，加上昨晚没有睡好，都想入住酒店休息一下，于是下午接近三点，导游带我们入住了我们的海公园的海景房，剩下的时间，自由活动。</span></span></span><div style="margin:0px;padding:0px;text-align:center;"><div style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;"><img alt="图片" originheight="480" originwidth="640" src="http://a1.qpic.cn/psb?/V12qSyDE3QN5um/yzMGHohs8EdRccScXNtqRuuMi2YiuA50VP0hFSOQ25o!/b/dNAAAAAAAAAA&amp;ek=1&amp;kp=1&amp;pt=0&amp;bo=gALgAYAC4AEFCSo!&amp;su=2182937697&amp;sce=0-12-12&amp;rf=2-9" data-img-idx="1" data-src="http://a1.qpic.cn/psb?/V12qSyDE3QN5um/yzMGHohs8EdRccScXNtqRuuMi2YiuA50VP0hFSOQ25o!/b/dNAAAAAAAAAA&amp;ek=1&amp;kp=1&amp;pt=0&amp;bo=gALgAYAC4AEFCSo!&amp;su=2182937697&amp;sce=0-12-12&amp;rf=2-9" style="margin:0px;padding:0px;border-width:0px;border-style:none;vertical-align:top;width:500px;height:375px;float:none;">&nbsp;</span></div>
<span style="margin:0px;padding:0px;">天后宫合影&nbsp;</span><div style="margin:0px;padding:0px;text-align:left;"><div style="margin:0px;padding:0px;text-align:center;"><div style="margin:0px;padding:0px;"><div style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;">&nbsp;<img alt="图片" originheight="652" originwidth="870" src="http://a3.qpic.cn/psb?/V12qSyDE3QN5um/TuYMTxXGyJOiNLyi0FmAURKoQQYF2YcBwlAJOJgBS0o!/b/dAYAAAAAAAAA&amp;ek=1&amp;kp=1&amp;pt=0&amp;bo=KwQgA8AMkAkFCXM!&amp;su=2241489617&amp;sce=0-12-12&amp;rf=2-9" data-img-idx="2" data-src="http://a3.qpic.cn/psb?/V12qSyDE3QN5um/TuYMTxXGyJOiNLyi0FmAURKoQQYF2YcBwlAJOJgBS0o!/b/dAYAAAAAAAAA&amp;ek=1&amp;kp=1&amp;pt=0&amp;bo=KwQgA8AMkAkFCXM!&amp;su=2241489617&amp;sce=0-12-12&amp;rf=2-9" style="margin:0px;padding:0px;border-width:0px;border-style:none;vertical-align:top;width:500px;height:375px;float:none;"><br>
<span style="margin:0px;padding:0px;">海边沙滩<br>
<span style="margin:0px;padding:0px;">&nbsp;</span></span></span><div style="margin:0px;padding:0px;text-align:left;"><div style="margin:0px;padding:0px;text-align:center;"><div style="margin:0px;padding:0px;text-align:left;"><div style="margin:0px;padding:0px;text-align:center;"><div style="margin:0px;padding:0px;text-align:left;"><div style="margin:0px;padding:0px;text-align:center;"><div style="margin:0px;padding:0px;text-align:left;"><span style="margin:0px;padding:0px;">短短地睡了一个午觉，我们就出去海边玩，下到下面发现很大，沙很细很白，就像小孩的皮肤一样那么细腻。然而，我们走了半天也见不到寄存东西和更衣的地方，这点太坑。而且，说好的私家沙滩，都跟下饺子一样那么多人，我表示不太喜欢。回去换好泳衣，在前台寄存好房卡之后，我们满怀激动想要去酒店的泳池游泳，结果还是要收费的。旁边的水上乐园也是要收费的，这简直坑爹，就玩水而言，完全没有阳江的海陵岛闸坡好玩。结果后面的事情更加验证了我们的想法。下海后发现，岸边几十米都才一米多，但是底下的沙滩就像很实的泥地，这就是沙子细浪小不好的地方，有时候还会踩到一个荆棘类的东西，吓得赶紧逃开。而海水也太咸太辣，别问我怎么知道的！皮肤都感到了一种灼烧感，令人赶紧不爽，完全没有闸坡好。闸坡浪大，沙滩宽，水更清，游泳好玩。所以巽寮湾只是好看而已，可能是因为在半岛的背部，所以海水没有直面太平洋来得爽，所以如果要来这里玩，要做好思想准备，或者尽量不下水海玩，可以在泳池里面玩玩。游了半个钟，我们两个便上岸了，赶紧上去，然后还在沙滩碰到雄洲两个，他们穿着情侣装，然后给他们照了一张合照。我们没有吃饭，直接等看完华家班的表演再去吃夜宵。夕阳下山后的海边又是不一样的景色。</span></div>
<span style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;">&nbsp;</span><br>
<img alt="图片" originheight="1067" originwidth="800" src="http://a4.qpic.cn/psb?/V12qSyDE3QN5um/FCu*9x6nS0RKTagdN54OQ5UC41LGA0RvStt1ksc*jWQ!/b/dAMAAAAAAAAA&amp;ek=1&amp;kp=1&amp;pt=0&amp;bo=IAMrBMAMkAkFCXM!&amp;su=217314577&amp;sce=0-12-12&amp;rf=2-9" data-img-idx="3" data-src="http://a4.qpic.cn/psb?/V12qSyDE3QN5um/FCu*9x6nS0RKTagdN54OQ5UC41LGA0RvStt1ksc*jWQ!/b/dAMAAAAAAAAA&amp;ek=1&amp;kp=1&amp;pt=0&amp;bo=IAMrBMAMkAkFCXM!&amp;su=217314577&amp;sce=0-12-12&amp;rf=2-9" style="margin:0px;padding:0px;border-width:0px;border-style:none;vertical-align:top;width:500px;height:667px;float:none;"></span></div>
</div>
</div>
</div>
</div>
<div style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;"><span style="margin:0px;padding:0px;">&nbsp;原以为华家班的表演可以不看，结果进去后发现还算比较给力的，一些汽车特技让人有在看《速度与激情》的感觉。一开始是四辆白色轿车在奔驰，速度还挺快，而且保持一致的速度，依次上演了，齐头并进，交叉绕桩，超车面对面，死亡之吻等，后面又上演了高超的停车，停进去二车之间只有五公分！主持人也很给力，声音洪亮，还十分有趣。后续又上演了漂移，单边行驶，单边停车等精彩节目，偶尔还邀请观众上去体验，“这里有两辆跑车，一辆没有敞篷，另外一辆敞篷，建议女士选敞篷的，因为吐起来方便！”，“这位女士，你买了保险吗，哦，这么危险的体验一定得买保险，什么，没买，好吧，祝你好运，不过你放心，我们没有把握是不会让观众上来体验的，我们的死亡之吻的成功率已经达到了15%”，最后来到了摩托特技环节，由两个外国人来表演，在车上各种动作真的是令人惊奇，最后是高空飞跃，在高空中做一些惊险动作，赢得了阵阵掌声。总体还是不错的，看完特技表演我们就去吃夜宵了，点了几样海鲜，生蚝是现做的，非常新鲜，非常好吃，喝了几瓶啤酒，有点微醺，聊了很多彼此之间的事情，还讲到细水长流，未来<span style="margin:0px;padding:0px;">。这个晚上，惬意~</span></span></span></span></span></span></span><div style="margin:0px;padding:0px;text-align:center;"><span style="margin:0px;padding:0px;"><img alt="图片" originheight="652" originwidth="870" src="http://a1.qpic.cn/psb?/V12qSyDE3QN5um/cQfvVNJjEFjpleehJEoTuCotU7qSnTqhsW.jiwfEIXI!/b/dAQAAAAAAAAA&amp;ek=1&amp;kp=1&amp;pt=0&amp;bo=KwQgA8AMkAkFCXM!&amp;su=2226034785&amp;sce=0-12-12&amp;rf=2-9" data-img-idx="4" data-src="http://a1.qpic.cn/psb?/V12qSyDE3QN5um/cQfvVNJjEFjpleehJEoTuCotU7qSnTqhsW.jiwfEIXI!/b/dAQAAAAAAAAA&amp;ek=1&amp;kp=1&amp;pt=0&amp;bo=KwQgA8AMkAkFCXM!&amp;su=2226034785&amp;sce=0-12-12&amp;rf=2-9" style="margin:0px;padding:0px;border-width:0px;border-style:none;vertical-align:top;width:500px;height:375px;float:none;">&nbsp;<br>
</span><div style="margin:0px;padding:0px;text-align:left;"><span style="margin:0px;padding:0px;">第二天，我们出发去小桂湾玩漂流，先骑单车，虽然没有海边骑得开心，但能够在一起玩已经很开心了，而且有了自拍神器，好像多了很多乐趣，用各种视角拍到合照。骑完单车，就去玩漂流，也是第一次玩漂流，从山顶一直往下漂，修的渠道有些地方落差大，浪比较大，总体而言两个人还是很享受的，在大太阳下晒了两个多小时，也是黑了，最终也是湿身了，我还闹没拿换洗衣服的乌龙。漂完已经是四点了，于是乘车回深圳去了。</span><div style="margin:0px;padding:0px;text-align:center;"><span style="margin:0px;padding:0px;"><img alt="图片" originheight="480" originwidth="554" src="http://a1.qpic.cn/psb?/a2684970-854b-447b-8f6f-debc8dc8fb22/pxScSSxXFREy02tWvKB.FtW5pG0pZuMWTZ*QyAanivs!/b/dA2Nu20*AgAA&amp;ek=1&amp;kp=1&amp;pt=0&amp;bo=KgLgAQAAAAAFAOo!&amp;su=063744977&amp;sce=0-12-12&amp;rf=2-9" data-img-idx="5" data-src="http://a1.qpic.cn/psb?/a2684970-854b-447b-8f6f-debc8dc8fb22/pxScSSxXFREy02tWvKB.FtW5pG0pZuMWTZ*QyAanivs!/b/dA2Nu20*AgAA&amp;ek=1&amp;kp=1&amp;pt=0&amp;bo=KgLgAQAAAAAFAOo!&amp;su=063744977&amp;sce=0-12-12&amp;rf=2-9" style="margin:0px;padding:0px;border-width:0px;border-style:none;vertical-align:top;width:500px;height:434px;float:none;">&nbsp;</span><div style="margin:0px;padding:0px;text-align:left;"><span style="margin:0px;padding:0px;">回到深圳，结束这次特别意义的四人海边漂流行。全程眼光明媚，感谢天公作美，而人多也比较好玩。&nbsp;两位女士也很贤惠，让整个旅途都更多了快乐，为了以后有更多在一起的时间，我们要更努力，要成为更加杰出的人，互相吸引，互相带来开心因素，愿我们两对都有个美好未来。<br>
<span style="margin:0px;padding:0px;"><br>
东&nbsp;谨记之<br>
2015年06月22日&nbsp;</span></span></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/28/把大话设计模式读薄/" itemprop="url">
                  把大话设计模式读薄
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-04-28T19:55:58+08:00" content="2015-04-28">
              2015-04-28
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2015/04/28/把大话设计模式读薄/" class="leancloud_visitors" data-flag-title="把大话设计模式读薄">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##前言<br>最近用了近两三天来翻完了《大话设计模式》这本书，里面一一展示了29种设计模式，这些设计模式都是基于面向对象的，根据各种法则推演出来，是面向对象的“类的结构”。里面很多结构都是借鉴了生活中的一些解耦的思想，我们开发的过程中应当有意识地在编写代码的时候怎么样让程序结构更好。这其实是用一种面向对象的思想来思考程序的各个模块，而我们的世界本来就是各种对象的协作，我们是要让程序模拟我们的现实世界。全书都是用大鸟和小菜的有趣故事来作引喻，读来较为轻松。</p>
<p>通常在设计软件时想明白两个问题很重要：<br>该对象拥有的属性是什么？<br>该对象应该怎么与外界交互？<br>如果想明白了这两件事情，那么我们的设计模式大概也就此出来了。</p>
<p>大多数时候我们通常都是要具体情况具体分析，比如创建对象，当遇到对象种类太多的时候，我们用简单工厂来工作。而当一件事情遇到很强的耦合的时候，我们借助面向对象的三个特征（封装，继承，多态），并引入一些抽象类或者结构，就能够解决我们的难题。其中有几个让我印象特别深刻，如命令模式（专门用一个人来记录命令，命令本身作为一个对象），组合模式（树结构），职责链模式（链结构），这些结构是在特定情境下才该用的，用得不当强套反而会不好。</p>
<p>对象之间的交互，是设计模式的重点所在。设计模式主要分为三类：</p>
<ul>
<li>创建型模式    创建模式主要谈论该如何创建对象，适用于各种情况</li>
<li>结构型模式    在内部或者外部引入某种结构，然后用这种结构解耦</li>
<li>行为型模式    为了完成特定的任务，而引入结构来模拟某种行为</li>
</ul>
<h2 id="常见法则"><a href="#常见法则" class="headerlink" title="常见法则"></a>常见法则</h2><ul>
<li>单一职责原则</li>
</ul>
<p><img src="http://www.bibodeng.com/content/plugins/kl_album/upload/201504/ab7146cad8e511e940265b371ed65111201504281943251916388084.png" alt="单一职责原则"></p>
<p>一个类应当只做一件事情，应该将事物进行抽象，将各种逻辑抽象到各类中，由类的协作交互来完成操作。这也是面向对象所要解决的问题，代码不应该到处复制，而只应当集中在一处，然后提供外部接口，这样修改起来也方便。</p>
<ul>
<li>封闭-开放原则</li>
</ul>
<p><img src="http://www.bibodeng.com/content/plugins/kl_album/upload/201504/0fb997ef42795dc04043e7c17518bc7920150428194326386383554.png" alt="封闭-开放原则"></p>
<p>一个软件实体应该可以扩展，但不应该被修改。在设计之初，应该让它抽象得足够好，并且容易扩展。而不是当需求有变动时，需要大量修改代码。书中一个很好的考验程序的方法时，加一些变化的需求，看看原本的程序是不是会很容易被改动，就比方说超市收银不仅是算算总数，而考虑上打折，返现，程序需不需要大改？</p>
<ul>
<li>依赖倒转原则</li>
</ul>
<p><img src="http://www.bibodeng.com/content/plugins/kl_album/upload/201504/82fc4f940e3baee7ee1f1f30ff8cac6e201504281943261009356962.png" alt="依赖倒转原则"></p>
<p>上层不应当依赖于下层，上层和下层都应该依赖于抽象的接口，两者之间的关系，应当是一种抽象上的关系。而实例，只是延续了这种关系。就好像爸爸和儿子是一种抽象关系，再生一个儿子（实例），这种父子关系也能复用，不会改变。</p>
<p><img src="http://www.bibodeng.com/content/plugins/kl_album/upload/201504/b9e3dc340854452f948de1ff4e40a6af201504281943261416239223.png" alt="依赖倒转"></p>
<ul>
<li>里氏代换原则</li>
</ul>
<p><img src="http://www.bibodeng.com/content/plugins/kl_album/upload/201504/25ad4071a8f5072cdf298203cc427c3e201504281943261213772502.png" alt="里氏代换原则"></p>
<p>一个类的子类实例，替代程序中的所有该类实例，程序不会出问题。就是说子类完全能够做父类能做的事情。既然子类和父类是 is a的关系，那么就应该维护这种抽象关系的纯净。就像无论老人小孩都是人，他们都是人，都具备人的根本属性。</p>
<ul>
<li>聚合复用</li>
</ul>
<p><img src="http://www.bibodeng.com/content/plugins/kl_album/upload/201504/e22fb59803f892df92e7ec0d89fdd908201504281943251906862646.png" alt="聚合复用原则"></p>
<p>尽量使用聚合来替代继承，继承会让类型很多，维护很难。而现实世界中，大多数事物都是一种组合关系，比如汽车和和各个部件，尽量不要因为各种外在的东西而去新增类，比如多个烟囱的车还是一样的车，没必要去新增类，如果的确是继承关系，如各种种类的车（奔驰，宝马，特斯拉。。），也不要怕继承。</p>
<ul>
<li>迪米特法则（最少知识）</li>
</ul>
<p><img src="http://www.bibodeng.com/content/plugins/kl_album/upload/201504/67553d90c1b737e8d3e1a3b2b82fc3ba20150428194325779918248.png" alt="迪米特法则"></p>
<p>一个类应当了解尽量少的知识便能工作起来，故而应当提供相应接口，不该别人知道的不让别人知道，自己不该知道的也不去知道。</p>
<h2 id="创建型模式"><a href="#创建型模式" class="headerlink" title="创建型模式"></a>创建型模式</h2><p>顾名思义，创建型模式就是创建一个对象时使用的模式。</p>
<ul>
<li>单例</li>
</ul>
<p>每个类仅能有一个这种类型的实例，这个实例作为类的Static属性，当存在的时候直接返回，如果不存在就创建一个存在这个属性中。我们常常在WCF的client端信道上使用单例模式，让它能够得到充分的复用。</p>
<ul>
<li>工厂</li>
</ul>
<p>通过一个过程来组装一个对象，也可以把构造的过程隐藏起来，不用关心具体的实例化过程。简单工厂针对不同的子类型，根据传入参数进行判断从而选择构造函数。工厂方法则将工厂抽象出来，对应的工厂可以组装对应的产品，而决定使用哪个工厂的决定还是要的，只不过是延后到了客户端，可以使用反射技术就能够灵活地在构建工厂的时候指定类型。</p>
<ul>
<li>抽象工厂</li>
</ul>
<p>在工厂方法之上的一种升级，工厂可以构造多种产品。创建一系列相关或相互依赖的接口，而无需指定具体的类。对被构造的产品，又提供了一层抽象产品类，从而解除具体类与工厂的依赖。</p>
<ul>
<li>建造者</li>
</ul>
<p>将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以构建不同的表示。引入一个指挥类，让建造者来负责复杂对象的构建，而不用在内部去按顺序组建。说白了，就是把组装过程分离出来，在需要的时候注入到Builder里面。</p>
<ul>
<li>原型</li>
</ul>
<p>说到原型就应该想到实例，拷贝一个实例，然后加以改造返回——克隆。使用这个模式是为了在构建对象时，只要小小改动，却要费力重建一遍的情况下节省步骤。就像抄别人试卷一样，答案全抄过来，改掉名字就可以了（当然千万不要这么做）。</p>
<h2 id="结构型模式"><a href="#结构型模式" class="headerlink" title="结构型模式"></a>结构型模式</h2><p>通过将对象间的形成某种存储上的结构，从而使用其独特的结构特性来完成工作。</p>
<ul>
<li>适配器</li>
</ul>
<p>将原有的接口适配到新的接口，在封装时做一些额外的工作。</p>
<ul>
<li>装饰器</li>
</ul>
<p>对对象进行一层封装，而且封装之后还可以再次进行封装，就像穿衣服一样，一件套一件。这个外套的内部维护着一个人的实体，而外套的装饰行为，则会影响到里面的人。技术上有个要点就是这个装饰类也是人的子类——装饰了xx的人。</p>
<ul>
<li>桥接</li>
</ul>
<p>将抽象部分和实现部分分离，使得它们可以独立变化。要表达两个类之间的关系，可以这样做：两个类之上还有一个抽象类，而两个类之间的关联，可以在抽象的类之间定义。</p>
<ul>
<li>组合</li>
</ul>
<p>类似于数据结构中的树结构，呈一种组合递归形态。一个节点可以由子节点或者叶子节点来组成，而这个节点也可以作为其它节点的子节点。在技术上就是存储对孩子的引用，从而可以从父节点下钻到孩子节点。这个模式还有一个特色，那就是由于父子实现的接口一致，顶部的操作可以一直递降到每个子节点直至叶子节点，在UI上，这种设计可能比较有用（如折叠一个树结构目录）。</p>
<ul>
<li>享元</li>
</ul>
<p>维护一个（组）资源，这个资源大家一起使用，而不是每个实例都维护一个（组）。共享才是王道，技术上可以使用一些判断来减少大对象的维护，当需要的时候返回现成的。</p>
<ul>
<li>代理</li>
</ul>
<p>帮别人送情书，但是收信人不知道真正写信的人的存在，只知道有人送给ta。代理方和被代理方应该实现一样的接口，而代理方维护一个被代理方，被代理方才是真正干活的人。这种模式往往用来对操作进行封装，进行额外的权限控制等。</p>
<ul>
<li>外观</li>
</ul>
<p>为复杂的子系统提供一个漂亮的门面，这样可以适当地隐藏子系统后面背后的复杂逻辑，从而提供简洁的接口。用享元模式，支持大量细粒度的对象。</p>
<h2 id="行为型模式"><a href="#行为型模式" class="headerlink" title="行为型模式"></a>行为型模式</h2><ul>
<li>观察者</li>
</ul>
<p>大家订阅观察者的信息变化，当事件发生时，观察者负责通知各方执行操作。</p>
<ul>
<li>模板</li>
</ul>
<p>将核心的逻辑骨架（执行A，执行B）放到父类中，而子类存储那些会变化的东西（具体重写的A，B过程）。这样当执行父类的模板方法的时候，就执行了具体的A，B方法。</p>
<ul>
<li>命令</li>
</ul>
<p>将命令抽象出来成为一个实体，命令的执行就是让接受者做出相应动作，另外有个通知者，负责将命令触发。命令还可以方便记录日志，放入队列中等操作。</p>
<ul>
<li>状态</li>
</ul>
<p>让状态之间去相互变化，无需集中控制，就像灯的开关一样，打上是开，打下是关，将它们分开来抽象成两种状态，这样变化起来就简单了——互相转化，而不是耦合在一起去控制其状态。</p>
<ul>
<li>职责链</li>
</ul>
<p>通过在内部维护一个下步处理人，类似于数据结构中的链表，当前处理完后可以传递到下一步处理人处理。在审批流程中常常用到职责链模式。</p>
<ul>
<li>解释器</li>
</ul>
<p>和编译器相关，将一些频繁使用的代号用一些抽象符号代替，需要使用的时候再进行解释，或者是在不同系统中进行转译。这个模式是借用了编译器中的概念。</p>
<ul>
<li>中介者</li>
</ul>
<p>大家都通过一个中介器来访问其它对象，解除类与类之间的依赖。中介者模式应用在一组对象的复杂通信中。</p>
<ul>
<li>访问者</li>
</ul>
<p>将处理过程的变化从数据结构中分离出来，在算法容易变化，数据结构比较稳定的情况下适用。如果数据结构不稳定，那需要经常修改模式中的代码，反而带来麻烦。一个事物接受观察者的观察，而观察者则执行具体的观察动作，外层还可以做一个集中控制一组这样的事物的观察动作。（这是一个比较复杂的模式）</p>
<ul>
<li>策略</li>
</ul>
<p>将分支封装成方案策略，这样就不会导致一大堆的分支判断。将策略注入到上下文中，将具体算法和客户端调用进行隔离。</p>
<ul>
<li>备忘录</li>
</ul>
<p>用一个简单点的结构记住实体的状态，而不是将实体整个存储，如打游戏要存档生命值，进度等，回来的时候加载档案即可。</p>
<ul>
<li>迭代器</li>
</ul>
<p>实现一个外部的迭代器，可以迭代一个可遍历的容器中的成员，这个迭代器不会漏掉其中一个元素。</p>
<h2 id="项目中的应用"><a href="#项目中的应用" class="headerlink" title="项目中的应用"></a>项目中的应用</h2><p>学习了设计模式，就应当在适当地时候加以使用，而各模式都有其使用的特定情境，它就像是对象关系的一种数据结构，用得恰到好处就能解决软件开发中的一些问题。我在日常的开发中，也留意到了前人写的代码中使用了一些设计模式，整个系统能够承受更加复杂的架构，而代码也显得优雅，易于拓展。</p>
<p>by bibodeng 2015-4-28</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/24/入手Macbook Pro/" itemprop="url">
                  入手Macbook Pro
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-04-24T23:57:39+08:00" content="2015-04-24">
              2015-04-24
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2015/04/24/入手Macbook Pro/" class="leancloud_visitors" data-flag-title="入手Macbook Pro">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
<p class="p1"><span style="line-height:1.5;">2015是不凡的一年，这一年做了许多比较重大的决策，其中入手Macbook也是其中之一。</span></p>
<p class="p1"><span style="line-height:1.5;"><img src="/content/uploadfile/201502/1fc71423736696.jpg" width="680" align="left" alt="" border="0"><br>
</span></p>
<p class="p3"><span style="line-height:1.5;">当时是在公司的BBS论坛上找了一个比较实惠的代购，之前也有看到彬彬的Macbook Air，表示的确会比较整体一点。在入手之前去过一次香港Apple实体店看过，感觉还不错，浑然一体。后来以一个比香港市价低一点的价格从代购渠道入手了，把玩了一个多月，渐渐也熟悉了Mac的一些方面。</span></p>
<p class="p2"></p>
<p class="p3"><span class="s1">硬件，Mac硬件方面，一个字贵，不同配置，升一个等级就要多加1k左右，而它的机身做得太性感，太纤细，以至于接个投影仪需要外接线，要买一个？行，出300块大洋！它自己不配鼠标，要买个鼠标，行，500大洋。但据说Mac比较保值，不要破损，用个几年还和新的一样，价格上也还值比较多。</span></p>
<p class="p2"></p>
<p class="p3"><span class="s1">显示，Retina显示屏也不是盖的，显示的精细程度，完爆一般的PC笔记本电脑，千万别看完珍珠屏再回去看普通屏幕，你会发现忍受不了。顺便提一下，在Mac下的字体都比较优雅好看，编程的字体更加完美，转眼一看Windows下的，品味被甩了几十条街。</span></p>
<p class="p2"></p>
<p class="p3"><span class="s1">散热&amp;待机，苹果的散热差得一逼，尤其是在看视频的时候，底部发热严重，虽然平日里听不到风扇的声音，合上就能走，还省电。待机时间略长，充满电基本上可以用一天，如果长时间待机，甚至可以用几天，这点来说，Mac表现堪称完美。</span></p>
<p class="p2"></p>
<p class="p3"><span class="s1">操控，Mac的操控没的说，其触摸板的操控非常顺畅，基本可以不要滑鼠。按键方面，少了一些按键，功能键共用了F1-F12，这点略不习惯，还有一些如Insert键也没了，暂时还没有配置一些常用快捷键。其实要是能够掌握好快捷键，用起来会爽很多。</span></p>
<p class="p2"></p>
<p class="p3"><span class="s1">软件，中和了Windows平台和Linux平台的软件，有些公司开发的软件有Mac版本，如常规的QQ，音乐类的App，开发类的Python，Sublime，Vim等也表现完美，但还是会碰到游戏等应用缺乏的局面，但对程序员来说还挺方便的，只是对.NET程序员不方便（我就是.NET程序员），不过随着微软的逐渐开源，这个情况慢慢会改变。所以基本上Mac是搞iOS开发，Web前端开发，Web后台开发，Android开发同学的理想平台。此外Mac和iOS设备的契合那自不必说，Mac的一些自带软件也很出色，所以基本能够满足日常及编程的需要。</span></p>
<p class="p2"></p>
<p class="p3"><span class="s1">有几个软件一定要推荐一下：</span></p>
<p class="p3"><span class="s1">Moom —— 窗口的布局器</span></p>
<p class="p3"><span class="s1">CodeRunner —— 便捷的代码运行板</span></p>
<p class="p3"><span class="s1">Dash —— 查各种开发文档</span></p>
<p class="p3"><span class="s1">Alfred —— 据说是神器，很贵</span></p>
<p class="p3"><span class="s1">印象笔记或Wiz —— 记笔记常用</span></p>
<p class="p2"></p>
<p class="p3"><span class="s1">ThinkPad要转赠给我弟弟了，怀念ThinkPad的靠谱，用了两年啥事没有，键盘的触感也比Mac好很多，Mac外壳冷冰冰，它的键盘也太烂了，完全没有巧克力的感觉，打个字还需要把指甲都剪掉，不像ThinkPad T系列的，打字实在是舒服，可以做到很细小的声音，不像Mac稀里哗啦。如果你想成为一个Windows或Linux平台的程序员，ThinkPad T系列会是一个很好的选择，千万不要选E系列的，太鸡肋了，如果你想搞iOS和前端相关的开发，又想在PC上又更多体验好点的软件，那就选Mac吧。</span></p>
<p class="p2"></p>
<p class="p3"><span class="s1">by bibodeng 2015-04-24</span></p>
<p class="p2"></p>
<p class="p2"></p>
<p class="p2"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/24/关于/" itemprop="url">
                  关于
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-04-24T18:34:14+08:00" content="2015-04-24">
              2015-04-24
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2015/04/24/关于/" class="leancloud_visitors" data-flag-title="关于">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
<p><a href="http://www.flickr.com/photos/49968232@N00/8566274509" id="fs_1" title="&quot;letter B&quot;" target="_blank" rel="noopener"><img alt="letter B" title="letter B" src="http://static.flickr.com/8379/8566274509_8a94f6432f_s.jpg" border="0"></a>    <a href="http://www.flickr.com/photos/49968232@N00/8187213852" id="fs_2" title="&quot;Foam Stamp Letter I&quot;" target="_blank" rel="noopener"><img alt="Foam Stamp Letter I" title="Foam Stamp Letter I" src="http://static.flickr.com/8481/8187213852_5703145006_s.jpg" border="0"></a>    <a href="http://www.flickr.com/photos/49968232@N00/8215905481" id="fs_3" title="letter B" target="_blank" rel="noopener"><img alt="letter B" src="http://static.flickr.com/8350/8215905481_488e1d0b03_s.jpg" border="0"></a>    <a href="http://www.flickr.com/photos/49968232@N00/8188007022" id="fs_4" title="Pastry Cutter Letter O" target="_blank" rel="noopener"><img alt="Pastry Cutter Letter O" src="http://static.flickr.com/8200/8188007022_f1a2f9ca1a_s.jpg" border="0"></a>    <br>
<a href="http://www.flickr.com/photos/49968232@N00/8186982854" id="fs_5" title="Stencil Letter D" target="_blank" rel="noopener"><img alt="Stencil Letter D" src="http://static.flickr.com/8070/8186982854_11e6ecb00d_s.jpg" border="0"></a>    <a href="http://www.flickr.com/photos/49968232@N00/8296927114" id="fs_6" title="&quot;letter E&quot;" target="_blank" rel="noopener"><img alt="letter E" title="letter E" src="http://static.flickr.com/8213/8296927114_0db3f5c281_s.jpg" border="0"></a>    <a href="http://www.flickr.com/photos/63943575@N00/8604884116" id="fs_7" title="n41" target="_blank" rel="noopener"><img alt="n41" src="http://static.flickr.com/8260/8604884116_e46595d6b0_s.jpg" border="0"></a>    <a href="http://www.flickr.com/photos/49968232@N00/8187031334" id="fs_8" title="BANANAGRAMS Letter G" target="_blank" rel="noopener"><img alt="BANANAGRAMS Letter G" src="http://static.flickr.com/8065/8187031334_7070e63106_s.jpg" border="0"></a>﻿﻿﻿﻿</p>
<div class="art_content" style="font-size:15px;letter-spacing:1px;line-height:1.3em;"><h3 style="background-color:#222222;color:#ffffff;padding:10px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';">[个人简介] Personal Info</h3>
<p style="font-family:'Times New Roman';">bibodeng，90后，就读&nbsp;<strong>计算机科学与技术专业</strong>，爱好博客与kindle，富有技术热情，目前就职于深圳腾讯。</p>
<p style="font-family:'Times New Roman';">夏酷暑，冬严寒，春也不死吾心，心所向，将所成。</p>
<h3 style="background-color:#222222;color:#ffffff;padding:10px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';">[技能] Skills</h3>
<ul style="font-family:'Times New Roman';"><li><p>参考系 &nbsp; &nbsp; : &nbsp;&nbsp;==================================================&nbsp;100</p>
</li>
<li><p>Linux &nbsp; &nbsp; &nbsp;: &nbsp; =============</p>
</li>
<li><p>Vim &nbsp; &nbsp; &nbsp; &nbsp;: &nbsp; ==============</p>
</li>
<li><p>Python &nbsp; &nbsp;: &nbsp; ===========</p>
</li>
<li><p>PHP &nbsp; &nbsp; &nbsp; &nbsp;: &nbsp; ========== &nbsp; &nbsp;</p>
</li>
<li><p>C/C++ &nbsp; &nbsp; : &nbsp; ==================</p>
</li>
<li><p>Java &nbsp; &nbsp; &nbsp; &nbsp;: &nbsp; =======</p>
</li>
<li><p>Javascript: &nbsp; ======================</p>
<p>&nbsp;</p>
</li>
</ul>
<h3 style="background-color:#222222;color:#ffffff;padding:10px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';">[爱好] Habits</h3>
<ul style="font-family:'Times New Roman';"><li><p>Kindle &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Kindle富一生</p>
</li>
<li><p>羽毛球 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;业余爱好</p>
</li>
<li><p>游泳 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 业余爱好 &nbsp; &nbsp;</p>
</li>
<li><p>书法绘画 &nbsp; &nbsp; &nbsp; 业余爱好</p>
</li>
</ul>
<h3 style="background-color:#222222;color:#ffffff;padding:10px;border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;font-family:'Times New Roman';">[联系我] Contact</h3>
<p style="font-family:'Times New Roman';">Email: bibodeng@gmail.com</p>
<p style="font-family:'Times New Roman';">Weibo:&nbsp;<a href="http://weibo.com/bibodeng" target="_blank"></a><a href="http://weibo.com/bibodeng" target="_blank">http://weibo.com/bibodeng</a></p>
<p style="font-family:'Times New Roman';">Website:&nbsp;<a href="http://bibodeng.com/" target="_blank">http://www.bibodeng.com</a></p>
<p style="font-family:'Times New Roman';"></p>
<script type="text/javascript" src="http://www.douban.com/service/badge/bibodeng/?selection=latest&amp;picsize=small&amp;show=collection&amp;n=20&amp;cat=drama%7Cmovie%7Cbook%7Cmusic&amp;columns=5"></script>
<p style="font-family:'Times New Roman';">by bibodeng 2013-05-12</p>
</div>
<p></p>
<script type="text/javascript>
function swapImg(id, ele, ta_rnd) {
    var spot = Math.floor(Math.random()*letters[id].length);
    var let = letters[id][spot];

    fs_id = $(ele).id.replace(/f_/, " fs_");="" newimg="<img border='0' alt='" +let.t+"'="" title="&quot;+let.t+&quot;" src="http://static.flickr.com/&quot;+let.s+&quot;/&quot;+let.id+&quot;_&quot;+let.st+&quot;_&quot;+size+&quot;.jpg">";

    $(ele).innerHTML=newImg;
    $(fs_id).href="http://www.flickr.com/photos/"+let.o+"/"+let.id;
    $(fs_id).title='"' + let.t + '"';
    $(fs_id).innerHTML = newImg;

    $('flickrOut_' + ta_rnd).value = replaceLeg($('flickrSource').innerHTML);
}

window.onload = function(){
    swapImg();
}
</script>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/23/股市小记/" itemprop="url">
                  股市小记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-04-23T00:06:58+08:00" content="2015-04-23">
              2015-04-23
            </time>
          </span>

          

          
            
          

          
	
          
          
             <span id="/2015/04/23/股市小记/" class="leancloud_visitors" data-flag-title="股市小记">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
<p style="font-family:sans-serif;font-size:14px;line-height:normal;widows:auto;">今年3月份，我开一个股市账号，本来打算用口碑不错的富途的，但是富途现在只有美股和港股可以交易，国内的A股需要等到年底前上线开通，所以我在三月的某个星期六就到公司附近的招商证券办理了一个股票账户，可以交易深市和沪市两地的股票。当然，这对我这个股市小白来说已经足够了。</p>
<p style="font-family:sans-serif;font-size:14px;line-height:normal;widows:auto;"></p>
<p style="font-family:sans-serif;font-size:14px;line-height:normal;widows:auto;">一开始没有太多的本金，对于股票的一些概念还不太熟，如持仓，涨停等等，当时开户的时候我还要求那个经纪人帮我介绍一下如何看走向图和K线图，这个经纪人很有精神头，看起来像是有自己的见解。后来我主动到豆瓣上找相关评分高的书，发现了《股票作手回忆录》、《股票大作手回忆录》、《穷查理宝典》等书籍，便津津有味地看起来了。后来海坡兄还在博客里推荐了我两本《海龟交易法则》、《投机原理》，看来是不错的。</p>
<p style="font-family:sans-serif;font-size:14px;line-height:normal;widows:auto;"></p>
<p style="font-family:sans-serif;font-size:14px;line-height:normal;widows:auto;">从《股票作手回忆录》中，我学习到了基本的股票交易原理，一开始我不理解股票为什么会涨，其实只要有供求，就有价格的涨跌，求的人出价高了，那么市值就涨了，但不要光看市值，因为在落地成为利润之前，它什么都不是，它是可能幻灭的泡沫，而投机者，则是要在这个波浪起伏中，去推测出接下来的走向，并在合适的时机买入卖出获得利润。有人秉持在投资中要理性，根据自己的分析来做出判断的理念，克服贪婪和恐惧，而有些时候也需要灵感和直觉，但就我看到的需要坚持一些原则：首要原则就是相信自己，其次是放平心态，不要犹犹豫豫，也不要轻信他人，不要过度相信小道消息。第一次用真金白银买入的时候，看到市值在飙升，表示很激动——这玩意居然可以涨这么快，而再过一会看的时候发现它居然跌了，我出现了亏损，这个时候会略微感到紧张。不过好在一天之内的涨跌幅度不超过10%，所以这个风险还是可以接受的。而且在目前这个总体的牛市之中，貌似随便投哪个股，涨的几率都会比较高，我慢慢有了一点点的盈利，我没有怎么去理它，只是看了一下它的曲线，总体还是看多，虽然我进入的时候已经是高点了，但它还是继续涨了，后来一点点盈利慢慢扩大，这个玩意还真是来得快（去得也快），盈利比放在余额宝里面要多得多，如果是亏损的话，估计也会让人觉得肉痛，但是久了慢慢就习惯了，要放宽心态，才能发挥好赚到钱。</p>
<p style="font-family:sans-serif;font-size:14px;line-height:normal;widows:auto;"></p>
<p style="font-family:sans-serif;font-size:14px;line-height:normal;widows:auto;">个人觉得，股票的交易其实是投资的一种副产品，钱投资给公司，公司用钱来产生价值，而这种公司的股票的交易，代表着企业的拥有权的交割，却因为供求关系而衍生出一种生意——实际上算是一种赌博，我更加看成是一种博弈的游戏。现在几乎到了全民炒股的时代，周围的人都在谈论着股票，大学舍友也已经开始投资这方面了，程序员们也用自己的闲钱多多少少买点。对于理财而言，多一条道路也好，多积累点金融知识，多了解这个社会的制度与运作总是有益的。</p>
<p style="font-family:sans-serif;font-size:14px;line-height:normal;widows:auto;"></p>
<p style="font-family:sans-serif;font-size:14px;line-height:normal;widows:auto;"></p>
<p style="font-family:sans-serif;font-size:14px;line-height:normal;widows:auto;"></p>
<p style="font-family:sans-serif;font-size:14px;line-height:normal;widows:auto;">by bibodeng 2015-04-23</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/bitcoin-cash-logo.svg"
               alt="bibodeng" />
          <p class="site-author-name" itemprop="name">bibodeng</p>
          <p class="site-description motion-element" itemprop="description">区块链爱好者，互联网从业者</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">185</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/bibodeng" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/bibodeng" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/bibodeng" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://ifwallet.com" title="IFWallet" target="_blank">IFWallet</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://ifpass.cash" title="IFPassword" target="_blank">IFPassword</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">bibodeng</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  



  
  
  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("RrMSWOa8nuCnCCWn8TyPa7Od-gzGzoHsz", "8xnzit83sqv6vUEuXlsEWe0s");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

</body>
</html>
